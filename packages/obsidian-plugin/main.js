/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => SageAIPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian6 = require("obsidian");

// src/services/ollama.ts
var import_obsidian = require("obsidian");
var OllamaService = class {
  constructor(config) {
    this.baseUrl = config.baseUrl.replace(/\/$/, "");
    this.model = config.model;
  }
  /**
   * Generate embeddings for the given text
   */
  async getEmbedding(text) {
    const response = await (0, import_obsidian.requestUrl)({
      url: `${this.baseUrl}/api/embeddings`,
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        model: this.model,
        prompt: text
      })
    });
    if (response.status !== 200) {
      throw new Error(`Ollama API error: ${response.status}`);
    }
    const data = response.json;
    return data.embedding;
  }
  /**
   * Generate embeddings for multiple texts in batch
   */
  async getEmbeddings(texts) {
    const embeddings = [];
    for (const text of texts) {
      const embedding = await this.getEmbedding(text);
      embeddings.push(embedding);
    }
    return embeddings;
  }
  /**
   * Check if Ollama server is reachable and the model is available
   */
  async healthCheck() {
    var _a;
    try {
      const tagsResponse = await (0, import_obsidian.requestUrl)({
        url: `${this.baseUrl}/api/tags`,
        method: "GET"
      });
      if (tagsResponse.status !== 200) {
        return {
          healthy: false,
          message: `Ollama server returned status ${tagsResponse.status}`
        };
      }
      const models = ((_a = tagsResponse.json) == null ? void 0 : _a.models) || [];
      const modelNames = models.map((m) => m.name);
      const hasModel = modelNames.some(
        (name) => name === this.model || name.startsWith(`${this.model}:`)
      );
      if (!hasModel) {
        return {
          healthy: false,
          message: `Model '${this.model}' not found. Available: ${modelNames.join(", ")}`
        };
      }
      return {
        healthy: true,
        message: `Connected to Ollama with model '${this.model}'`
      };
    } catch (error) {
      return {
        healthy: false,
        message: `Cannot connect to Ollama: ${error instanceof Error ? error.message : "Unknown error"}`
      };
    }
  }
  /**
   * Update service configuration
   */
  updateConfig(config) {
    if (config.baseUrl) {
      this.baseUrl = config.baseUrl.replace(/\/$/, "");
    }
    if (config.model) {
      this.model = config.model;
    }
  }
};

// src/services/qdrant.ts
var import_obsidian2 = require("obsidian");
var QdrantService = class {
  constructor(config) {
    this.baseUrl = config.baseUrl.replace(/\/$/, "");
    this.collection = config.collection;
  }
  /**
   * Search for similar vectors
   */
  async search(vector, limit = 10, scoreThreshold = 0) {
    const response = await (0, import_obsidian2.requestUrl)({
      url: `${this.baseUrl}/collections/${this.collection}/points/search`,
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        vector,
        limit,
        score_threshold: scoreThreshold,
        with_payload: true
      })
    });
    if (response.status !== 200) {
      throw new Error(`Qdrant search error: ${response.status}`);
    }
    return response.json.result || [];
  }
  /**
   * Upsert points (insert or update)
   */
  async upsert(points) {
    const response = await (0, import_obsidian2.requestUrl)({
      url: `${this.baseUrl}/collections/${this.collection}/points`,
      method: "PUT",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        points: points.map((p) => ({
          id: p.id,
          vector: p.vector,
          payload: p.payload
        }))
      })
    });
    if (response.status !== 200) {
      throw new Error(`Qdrant upsert error: ${response.status}`);
    }
  }
  /**
   * Delete points by IDs
   */
  async delete(ids) {
    const response = await (0, import_obsidian2.requestUrl)({
      url: `${this.baseUrl}/collections/${this.collection}/points/delete`,
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        points: ids
      })
    });
    if (response.status !== 200) {
      throw new Error(`Qdrant delete error: ${response.status}`);
    }
  }
  /**
   * Delete points by filter (e.g., by file path)
   */
  async deleteByFilter(filter) {
    const response = await (0, import_obsidian2.requestUrl)({
      url: `${this.baseUrl}/collections/${this.collection}/points/delete`,
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        filter
      })
    });
    if (response.status !== 200) {
      throw new Error(`Qdrant delete by filter error: ${response.status}`);
    }
  }
  /**
   * Get collection info
   */
  async getCollectionInfo() {
    try {
      const response = await (0, import_obsidian2.requestUrl)({
        url: `${this.baseUrl}/collections/${this.collection}`,
        method: "GET"
      });
      if (response.status !== 200) {
        return null;
      }
      return response.json.result;
    } catch (e) {
      return null;
    }
  }
  /**
   * Create collection if it doesn't exist
   */
  async ensureCollection(vectorSize) {
    const info = await this.getCollectionInfo();
    if (info) {
      return;
    }
    const response = await (0, import_obsidian2.requestUrl)({
      url: `${this.baseUrl}/collections/${this.collection}`,
      method: "PUT",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        vectors: {
          size: vectorSize,
          distance: "Cosine"
        }
      })
    });
    if (response.status !== 200) {
      throw new Error(`Failed to create collection: ${response.status}`);
    }
  }
  /**
   * Check if Qdrant server is reachable and collection exists
   */
  async healthCheck() {
    var _a, _b;
    try {
      const response = await (0, import_obsidian2.requestUrl)({
        url: `${this.baseUrl}/collections`,
        method: "GET"
      });
      if (response.status !== 200) {
        return {
          healthy: false,
          message: `Qdrant server returned status ${response.status}`
        };
      }
      const collections = ((_b = (_a = response.json) == null ? void 0 : _a.result) == null ? void 0 : _b.collections) || [];
      const hasCollection = collections.some(
        (c) => c.name === this.collection
      );
      if (!hasCollection) {
        return {
          healthy: false,
          message: `Collection '${this.collection}' not found. Run index first.`
        };
      }
      return {
        healthy: true,
        message: `Connected to Qdrant with collection '${this.collection}'`
      };
    } catch (error) {
      return {
        healthy: false,
        message: `Cannot connect to Qdrant: ${error instanceof Error ? error.message : "Unknown error"}`
      };
    }
  }
  /**
   * Get all point IDs in the collection
   */
  async getAllPointIds() {
    var _a, _b, _c, _d;
    const ids = [];
    let offset = null;
    const limit = 100;
    while (true) {
      const body = {
        limit,
        with_payload: false,
        with_vector: false
      };
      if (offset !== null) {
        body.offset = offset;
      }
      const response = await (0, import_obsidian2.requestUrl)({
        url: `${this.baseUrl}/collections/${this.collection}/points/scroll`,
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(body)
      });
      if (response.status !== 200) {
        break;
      }
      const points = ((_b = (_a = response.json) == null ? void 0 : _a.result) == null ? void 0 : _b.points) || [];
      for (const point of points) {
        ids.push(point.id);
      }
      offset = (_d = (_c = response.json) == null ? void 0 : _c.result) == null ? void 0 : _d.next_page_offset;
      if (!offset) {
        break;
      }
    }
    return ids;
  }
  /**
   * Update service configuration
   */
  updateConfig(config) {
    if (config.baseUrl) {
      this.baseUrl = config.baseUrl.replace(/\/$/, "");
    }
    if (config.collection) {
      this.collection = config.collection;
    }
  }
};

// src/services/indexer.ts
var VECTOR_SIZE = 1024;
var DocumentIndexer = class {
  constructor(config) {
    this.isIndexing = false;
    this.ollama = config.ollama;
    this.qdrant = config.qdrant;
    this.app = config.app;
  }
  /**
   * Index all markdown files in the vault
   */
  async indexVault(onProgress) {
    if (this.isIndexing) {
      throw new Error("Indexing already in progress");
    }
    this.isIndexing = true;
    let indexed = 0;
    try {
      await this.qdrant.ensureCollection(VECTOR_SIZE);
      const files = this.app.vault.getMarkdownFiles();
      const total = files.length;
      for (const file of files) {
        try {
          await this.indexFile(file);
          indexed++;
          onProgress == null ? void 0 : onProgress(indexed, total, file.path);
        } catch (error) {
          console.error(`Failed to index ${file.path}:`, error);
        }
      }
      return {
        totalDocuments: indexed,
        lastIndexed: Date.now()
      };
    } finally {
      this.isIndexing = false;
    }
  }
  /**
   * Index a single file
   */
  async indexFile(file) {
    const content = await this.app.vault.cachedRead(file);
    if (!content.trim()) {
      return;
    }
    const title = file.basename;
    const textToEmbed = `${title}

${content}`;
    const maxChars = 8e3;
    const truncatedText = textToEmbed.length > maxChars ? textToEmbed.substring(0, maxChars) : textToEmbed;
    const embedding = await this.ollama.getEmbedding(truncatedText);
    const metadata = this.extractMetadata(file, content);
    const id = this.pathToId(file.path);
    await this.qdrant.upsert([
      {
        id,
        vector: embedding,
        payload: {
          path: file.path,
          title: metadata.title,
          mtime: metadata.mtime,
          size: metadata.size,
          tags: metadata.tags,
          aliases: metadata.aliases,
          excerpt: content.substring(0, 500)
        }
      }
    ]);
  }
  /**
   * Remove a file from the index
   */
  async removeFile(path) {
    const id = this.pathToId(path);
    await this.qdrant.delete([id]);
  }
  /**
   * Search for similar documents
   */
  async search(query, limit = 10, minScore = 0.3) {
    const queryEmbedding = await this.ollama.getEmbedding(query);
    const results = await this.qdrant.search(queryEmbedding, limit, minScore);
    return results.map((r) => ({
      path: r.payload.path,
      title: r.payload.title,
      score: r.score,
      excerpt: r.payload.excerpt || ""
    }));
  }
  /**
   * Check if services are healthy
   */
  async healthCheck() {
    const [ollamaHealth, qdrantHealth] = await Promise.all([
      this.ollama.healthCheck(),
      this.qdrant.healthCheck()
    ]);
    return {
      ollama: ollamaHealth,
      qdrant: qdrantHealth
    };
  }
  /**
   * Get index statistics
   */
  async getStats() {
    const info = await this.qdrant.getCollectionInfo();
    if (!info) {
      return null;
    }
    return {
      totalDocuments: info.points_count || 0,
      lastIndexed: null
      // Qdrant doesn't track this
    };
  }
  /**
   * Extract metadata from file
   */
  extractMetadata(file, content) {
    var _a, _b, _c;
    const cache = this.app.metadataCache.getFileCache(file);
    const tags = [];
    if (cache == null ? void 0 : cache.tags) {
      tags.push(...cache.tags.map((t) => t.tag));
    }
    if ((_a = cache == null ? void 0 : cache.frontmatter) == null ? void 0 : _a.tags) {
      const fmTags = cache.frontmatter.tags;
      if (Array.isArray(fmTags)) {
        tags.push(...fmTags.map((t) => t.startsWith("#") ? t : `#${t}`));
      } else if (typeof fmTags === "string") {
        tags.push(fmTags.startsWith("#") ? fmTags : `#${fmTags}`);
      }
    }
    const aliases = [];
    if ((_b = cache == null ? void 0 : cache.frontmatter) == null ? void 0 : _b.aliases) {
      const fmAliases = cache.frontmatter.aliases;
      if (Array.isArray(fmAliases)) {
        aliases.push(...fmAliases);
      } else if (typeof fmAliases === "string") {
        aliases.push(fmAliases);
      }
    }
    const title = ((_c = cache == null ? void 0 : cache.frontmatter) == null ? void 0 : _c.title) || file.basename;
    return {
      path: file.path,
      title,
      mtime: file.stat.mtime,
      size: file.stat.size,
      tags: [...new Set(tags)],
      aliases
    };
  }
  /**
   * Convert file path to a numeric ID for Qdrant
   */
  pathToId(path) {
    let hash = 0;
    for (let i = 0; i < path.length; i++) {
      const char = path.charCodeAt(i);
      hash = (hash << 5) - hash + char;
      hash = hash & hash;
    }
    return Math.abs(hash);
  }
};

// src/ui/SearchModal.ts
var import_obsidian3 = require("obsidian");
var SearchModal = class extends import_obsidian3.Modal {
  constructor(app, indexer, maxResults = 10, minScore = 0.3) {
    super(app);
    this.results = [];
    this.indexer = indexer;
    this.maxResults = maxResults;
    this.minScore = minScore;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("sage-ai-search-modal");
    contentEl.createEl("h2", { text: "Sage AI: Semantic Search" });
    const inputContainer = contentEl.createDiv({
      cls: "sage-ai-search-input-container"
    });
    this.inputEl = inputContainer.createEl("input", {
      type: "text",
      placeholder: "Search by meaning...",
      cls: "sage-ai-search-input"
    });
    this.inputEl.focus();
    this.statusEl = contentEl.createDiv({ cls: "sage-ai-search-status" });
    this.statusEl.setText("Type to search");
    this.resultsContainer = contentEl.createDiv({
      cls: "sage-ai-search-results"
    });
    const debouncedSearch = (0, import_obsidian3.debounce)(
      async (query) => {
        if (query.length < 2) {
          this.statusEl.setText("Type at least 2 characters");
          this.resultsContainer.empty();
          return;
        }
        this.statusEl.setText("Searching...");
        try {
          this.results = await this.indexer.search(
            query,
            this.maxResults,
            this.minScore
          );
          this.renderResults();
          if (this.results.length === 0) {
            this.statusEl.setText("No results found");
          } else {
            this.statusEl.setText(
              `Found ${this.results.length} result${this.results.length === 1 ? "" : "s"}`
            );
          }
        } catch (error) {
          console.error("Search error:", error);
          this.statusEl.setText(
            `Error: ${error instanceof Error ? error.message : "Search failed"}`
          );
        }
      },
      300,
      true
    );
    this.inputEl.addEventListener("input", () => {
      debouncedSearch(this.inputEl.value);
    });
    this.inputEl.addEventListener("keydown", (e) => {
      if (e.key === "Escape") {
        this.close();
      } else if (e.key === "Enter" && this.results.length > 0) {
        this.openResult(this.results[0]);
      }
    });
  }
  renderResults() {
    this.resultsContainer.empty();
    for (const result of this.results) {
      const resultEl = this.resultsContainer.createDiv({
        cls: "sage-ai-search-result"
      });
      const titleRow = resultEl.createDiv({ cls: "sage-ai-result-title-row" });
      titleRow.createSpan({ text: result.title, cls: "sage-ai-result-title" });
      titleRow.createSpan({
        text: `${Math.round(result.score * 100)}%`,
        cls: "sage-ai-result-score"
      });
      resultEl.createDiv({
        text: result.path,
        cls: "sage-ai-result-path"
      });
      if (result.excerpt) {
        const excerptText = result.excerpt.length > 150 ? result.excerpt.substring(0, 150) + "..." : result.excerpt;
        resultEl.createDiv({
          text: excerptText,
          cls: "sage-ai-result-excerpt"
        });
      }
      resultEl.addEventListener("click", () => {
        this.openResult(result);
      });
    }
  }
  async openResult(result) {
    const file = this.app.vault.getAbstractFileByPath(result.path);
    if (file) {
      await this.app.workspace.openLinkText(result.path, "", false);
      this.close();
    } else {
      new import_obsidian3.Notice(`File not found: ${result.path}`);
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/ui/JumpModal.ts
var import_obsidian4 = require("obsidian");
var JumpModal = class extends import_obsidian4.FuzzySuggestModal {
  constructor(app) {
    super(app);
    this.setPlaceholder("Jump to document...");
    this.setInstructions([
      { command: "\u2191\u2193", purpose: "navigate" },
      { command: "\u21B5", purpose: "open" },
      { command: "esc", purpose: "dismiss" }
    ]);
  }
  getItems() {
    return this.app.vault.getMarkdownFiles().sort((a, b) => {
      return b.stat.mtime - a.stat.mtime;
    });
  }
  getItemText(file) {
    return file.path.replace(/\.md$/, "");
  }
  renderSuggestion(match, el) {
    const file = match.item;
    const container = el.createDiv({ cls: "sage-ai-jump-suggestion" });
    container.createDiv({
      text: file.basename,
      cls: "sage-ai-jump-title"
    });
    if (file.parent && file.parent.path !== "/") {
      container.createDiv({
        text: file.parent.path,
        cls: "sage-ai-jump-path"
      });
    }
    const mtime = new Date(file.stat.mtime);
    const timeAgo = this.formatTimeAgo(mtime);
    container.createDiv({
      text: timeAgo,
      cls: "sage-ai-jump-mtime"
    });
  }
  onChooseItem(file) {
    this.app.workspace.openLinkText(file.path, "", false);
  }
  formatTimeAgo(date) {
    const now = /* @__PURE__ */ new Date();
    const diffMs = now.getTime() - date.getTime();
    const diffMins = Math.floor(diffMs / 6e4);
    const diffHours = Math.floor(diffMs / 36e5);
    const diffDays = Math.floor(diffMs / 864e5);
    if (diffMins < 1) {
      return "just now";
    } else if (diffMins < 60) {
      return `${diffMins}m ago`;
    } else if (diffHours < 24) {
      return `${diffHours}h ago`;
    } else if (diffDays < 7) {
      return `${diffDays}d ago`;
    } else {
      return date.toLocaleDateString();
    }
  }
};

// src/ui/IndexModal.ts
var import_obsidian5 = require("obsidian");
var IndexModal = class extends import_obsidian5.Modal {
  constructor(app, indexer) {
    super(app);
    this.isIndexing = false;
    this.indexer = indexer;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("sage-ai-index-modal");
    contentEl.createEl("h2", { text: "Sage AI: Rebuild Index" });
    contentEl.createEl("p", {
      text: "This will re-index all markdown files in your vault. Existing index data will be updated.",
      cls: "sage-ai-index-description"
    });
    const progressContainer = contentEl.createDiv({
      cls: "sage-ai-progress-container"
    });
    this.progressEl = progressContainer.createDiv({
      cls: "sage-ai-progress-bar"
    });
    this.statusEl = contentEl.createDiv({ cls: "sage-ai-index-status" });
    const buttonContainer = contentEl.createDiv({
      cls: "sage-ai-button-container"
    });
    this.buttonEl = buttonContainer.createEl("button", {
      text: "Start Indexing",
      cls: "mod-cta"
    });
    this.buttonEl.addEventListener("click", () => {
      this.startIndexing();
    });
    this.checkHealth();
  }
  async checkHealth() {
    this.statusEl.setText("Checking connections...");
    try {
      const health = await this.indexer.healthCheck();
      if (!health.ollama.healthy) {
        this.statusEl.setText(`Ollama: ${health.ollama.message}`);
        this.buttonEl.disabled = true;
        return;
      }
      if (!health.qdrant.healthy && !health.qdrant.message.includes("not found")) {
        this.statusEl.setText(`Qdrant: ${health.qdrant.message}`);
        this.buttonEl.disabled = true;
        return;
      }
      const files = this.app.vault.getMarkdownFiles();
      this.statusEl.setText(`Ready to index ${files.length} files`);
      this.buttonEl.disabled = false;
    } catch (error) {
      this.statusEl.setText(
        `Error: ${error instanceof Error ? error.message : "Connection failed"}`
      );
      this.buttonEl.disabled = true;
    }
  }
  async startIndexing() {
    if (this.isIndexing)
      return;
    this.isIndexing = true;
    this.buttonEl.disabled = true;
    this.buttonEl.setText("Indexing...");
    const startTime = Date.now();
    try {
      const stats = await this.indexer.indexVault((current, total, file) => {
        const percent = current / total * 100;
        this.progressEl.style.width = `${percent}%`;
        this.statusEl.setText(`${current}/${total}: ${file}`);
      });
      const duration = ((Date.now() - startTime) / 1e3).toFixed(1);
      this.statusEl.setText(
        `Indexed ${stats.totalDocuments} documents in ${duration}s`
      );
      this.progressEl.style.width = "100%";
      this.buttonEl.setText("Done");
      new import_obsidian5.Notice(
        `Sage AI: Indexed ${stats.totalDocuments} documents in ${duration}s`
      );
    } catch (error) {
      console.error("Indexing error:", error);
      this.statusEl.setText(
        `Error: ${error instanceof Error ? error.message : "Indexing failed"}`
      );
      this.buttonEl.setText("Retry");
      this.buttonEl.disabled = false;
    } finally {
      this.isIndexing = false;
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/main.ts
var DEFAULT_SETTINGS = {
  ollamaUrl: "http://127.0.0.1:11434",
  ollamaModel: "bge-m3",
  qdrantUrl: "http://127.0.0.1:6333",
  qdrantCollection: "obsidian_docs",
  maxResults: 8,
  minScore: 0.3
};
var SageAIPlugin = class extends import_obsidian6.Plugin {
  async onload() {
    await this.loadSettings();
    this.initializeServices();
    this.addRibbonIcon("search", "Sage AI Search", () => {
      this.openSearchModal();
    });
    this.addCommand({
      id: "sage-ai-search",
      name: "Semantic Search",
      callback: () => {
        this.openSearchModal();
      }
    });
    this.addCommand({
      id: "sage-ai-jump",
      name: "Jump to Document",
      callback: () => {
        new JumpModal(this.app).open();
      }
    });
    this.addCommand({
      id: "sage-ai-reindex",
      name: "Rebuild Index",
      callback: () => {
        new IndexModal(this.app, this.indexer).open();
      }
    });
    this.addCommand({
      id: "sage-ai-status",
      name: "Check Connection Status",
      callback: async () => {
        await this.checkStatus();
      }
    });
    this.addSettingTab(new SageAISettingTab(this.app, this));
  }
  initializeServices() {
    this.ollama = new OllamaService({
      baseUrl: this.settings.ollamaUrl,
      model: this.settings.ollamaModel
    });
    this.qdrant = new QdrantService({
      baseUrl: this.settings.qdrantUrl,
      collection: this.settings.qdrantCollection
    });
    this.indexer = new DocumentIndexer({
      ollama: this.ollama,
      qdrant: this.qdrant,
      app: this.app
    });
  }
  async openSearchModal() {
    const health = await this.indexer.healthCheck();
    if (!health.ollama.healthy) {
      new import_obsidian6.Notice(`Sage AI: ${health.ollama.message}`);
      return;
    }
    if (!health.qdrant.healthy) {
      new import_obsidian6.Notice(`Sage AI: ${health.qdrant.message}. Run "Rebuild Index" first.`);
      return;
    }
    new SearchModal(
      this.app,
      this.indexer,
      this.settings.maxResults,
      this.settings.minScore
    ).open();
  }
  async checkStatus() {
    new import_obsidian6.Notice("Sage AI: Checking connections...");
    try {
      const health = await this.indexer.healthCheck();
      const stats = await this.indexer.getStats();
      let message = "Sage AI Status:\n";
      message += `
Ollama: ${health.ollama.healthy ? "\u2713" : "\u2717"} ${health.ollama.message}`;
      message += `
Qdrant: ${health.qdrant.healthy ? "\u2713" : "\u2717"} ${health.qdrant.message}`;
      if (stats) {
        message += `

Indexed documents: ${stats.totalDocuments}`;
      }
      new import_obsidian6.Notice(message, 1e4);
    } catch (error) {
      new import_obsidian6.Notice(
        `Sage AI: Error checking status - ${error instanceof Error ? error.message : "Unknown error"}`
      );
    }
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
    if (this.ollama) {
      this.ollama.updateConfig({
        baseUrl: this.settings.ollamaUrl,
        model: this.settings.ollamaModel
      });
    }
    if (this.qdrant) {
      this.qdrant.updateConfig({
        baseUrl: this.settings.qdrantUrl,
        collection: this.settings.qdrantCollection
      });
    }
  }
};
var SageAISettingTab = class extends import_obsidian6.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Sage AI Settings" });
    containerEl.createEl("h3", { text: "Ollama Configuration" });
    new import_obsidian6.Setting(containerEl).setName("Ollama URL").setDesc("URL of your Ollama server").addText(
      (text) => text.setPlaceholder("http://127.0.0.1:11434").setValue(this.plugin.settings.ollamaUrl).onChange(async (value) => {
        this.plugin.settings.ollamaUrl = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian6.Setting(containerEl).setName("Embedding Model").setDesc("Ollama model for generating embeddings (bge-m3 recommended)").addText(
      (text) => text.setPlaceholder("bge-m3").setValue(this.plugin.settings.ollamaModel).onChange(async (value) => {
        this.plugin.settings.ollamaModel = value;
        await this.plugin.saveSettings();
      })
    );
    containerEl.createEl("h3", { text: "Qdrant Configuration" });
    new import_obsidian6.Setting(containerEl).setName("Qdrant URL").setDesc("URL of your Qdrant server").addText(
      (text) => text.setPlaceholder("http://127.0.0.1:6333").setValue(this.plugin.settings.qdrantUrl).onChange(async (value) => {
        this.plugin.settings.qdrantUrl = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian6.Setting(containerEl).setName("Collection Name").setDesc("Qdrant collection name for storing vectors").addText(
      (text) => text.setPlaceholder("obsidian_docs").setValue(this.plugin.settings.qdrantCollection).onChange(async (value) => {
        this.plugin.settings.qdrantCollection = value;
        await this.plugin.saveSettings();
      })
    );
    containerEl.createEl("h3", { text: "Search Configuration" });
    new import_obsidian6.Setting(containerEl).setName("Max Results").setDesc("Maximum number of search results to return").addSlider(
      (slider) => slider.setLimits(1, 20, 1).setValue(this.plugin.settings.maxResults).setDynamicTooltip().onChange(async (value) => {
        this.plugin.settings.maxResults = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian6.Setting(containerEl).setName("Minimum Score").setDesc("Minimum similarity score for results (0-1)").addSlider(
      (slider) => slider.setLimits(0, 1, 0.05).setValue(this.plugin.settings.minScore).setDynamicTooltip().onChange(async (value) => {
        this.plugin.settings.minScore = value;
        await this.plugin.saveSettings();
      })
    );
    containerEl.createEl("h3", { text: "Connection Test" });
    new import_obsidian6.Setting(containerEl).setName("Test Connections").setDesc("Test connection to Ollama and Qdrant servers").addButton(
      (button) => button.setButtonText("Test").onClick(async () => {
        button.setButtonText("Testing...");
        button.setDisabled(true);
        try {
          const ollama = new OllamaService({
            baseUrl: this.plugin.settings.ollamaUrl,
            model: this.plugin.settings.ollamaModel
          });
          const qdrant = new QdrantService({
            baseUrl: this.plugin.settings.qdrantUrl,
            collection: this.plugin.settings.qdrantCollection
          });
          const [ollamaHealth, qdrantHealth] = await Promise.all([
            ollama.healthCheck(),
            qdrant.healthCheck()
          ]);
          let message = "";
          message += `Ollama: ${ollamaHealth.healthy ? "\u2713" : "\u2717"} ${ollamaHealth.message}
`;
          message += `Qdrant: ${qdrantHealth.healthy ? "\u2713" : "\u2717"} ${qdrantHealth.message}`;
          new import_obsidian6.Notice(message, 8e3);
        } catch (error) {
          new import_obsidian6.Notice(
            `Error: ${error instanceof Error ? error.message : "Test failed"}`
          );
        } finally {
          button.setButtonText("Test");
          button.setDisabled(false);
        }
      })
    );
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3NlcnZpY2VzL29sbGFtYS50cyIsICJzcmMvc2VydmljZXMvcWRyYW50LnRzIiwgInNyYy9zZXJ2aWNlcy9pbmRleGVyLnRzIiwgInNyYy91aS9TZWFyY2hNb2RhbC50cyIsICJzcmMvdWkvSnVtcE1vZGFsLnRzIiwgInNyYy91aS9JbmRleE1vZGFsLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBQbHVnaW4sIFBsdWdpblNldHRpbmdUYWIsIEFwcCwgU2V0dGluZywgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgT2xsYW1hU2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvb2xsYW1hJztcbmltcG9ydCB7IFFkcmFudFNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL3FkcmFudCc7XG5pbXBvcnQgeyBEb2N1bWVudEluZGV4ZXIgfSBmcm9tICcuL3NlcnZpY2VzL2luZGV4ZXInO1xuaW1wb3J0IHsgU2VhcmNoTW9kYWwgfSBmcm9tICcuL3VpL1NlYXJjaE1vZGFsJztcbmltcG9ydCB7IEp1bXBNb2RhbCB9IGZyb20gJy4vdWkvSnVtcE1vZGFsJztcbmltcG9ydCB7IEluZGV4TW9kYWwgfSBmcm9tICcuL3VpL0luZGV4TW9kYWwnO1xuXG5pbnRlcmZhY2UgU2FnZUFJU2V0dGluZ3Mge1xuICBvbGxhbWFVcmw6IHN0cmluZztcbiAgb2xsYW1hTW9kZWw6IHN0cmluZztcbiAgcWRyYW50VXJsOiBzdHJpbmc7XG4gIHFkcmFudENvbGxlY3Rpb246IHN0cmluZztcbiAgbWF4UmVzdWx0czogbnVtYmVyO1xuICBtaW5TY29yZTogbnVtYmVyO1xufVxuXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBTYWdlQUlTZXR0aW5ncyA9IHtcbiAgb2xsYW1hVXJsOiAnaHR0cDovLzEyNy4wLjAuMToxMTQzNCcsXG4gIG9sbGFtYU1vZGVsOiAnYmdlLW0zJyxcbiAgcWRyYW50VXJsOiAnaHR0cDovLzEyNy4wLjAuMTo2MzMzJyxcbiAgcWRyYW50Q29sbGVjdGlvbjogJ29ic2lkaWFuX2RvY3MnLFxuICBtYXhSZXN1bHRzOiA4LFxuICBtaW5TY29yZTogMC4zLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2FnZUFJUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcbiAgc2V0dGluZ3M6IFNhZ2VBSVNldHRpbmdzO1xuICBwcml2YXRlIG9sbGFtYTogT2xsYW1hU2VydmljZTtcbiAgcHJpdmF0ZSBxZHJhbnQ6IFFkcmFudFNlcnZpY2U7XG4gIHByaXZhdGUgaW5kZXhlcjogRG9jdW1lbnRJbmRleGVyO1xuXG4gIGFzeW5jIG9ubG9hZCgpIHtcbiAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuICAgIHRoaXMuaW5pdGlhbGl6ZVNlcnZpY2VzKCk7XG5cbiAgICAvLyBBZGQgcmliYm9uIGljb25cbiAgICB0aGlzLmFkZFJpYmJvbkljb24oJ3NlYXJjaCcsICdTYWdlIEFJIFNlYXJjaCcsICgpID0+IHtcbiAgICAgIHRoaXMub3BlblNlYXJjaE1vZGFsKCk7XG4gICAgfSk7XG5cbiAgICAvLyBBZGQgY29tbWFuZDogU2VtYW50aWMgU2VhcmNoXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnc2FnZS1haS1zZWFyY2gnLFxuICAgICAgbmFtZTogJ1NlbWFudGljIFNlYXJjaCcsXG4gICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICB0aGlzLm9wZW5TZWFyY2hNb2RhbCgpO1xuICAgICAgfSxcbiAgICB9KTtcblxuICAgIC8vIEFkZCBjb21tYW5kOiBKdW1wIHRvIERvY3VtZW50XG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnc2FnZS1haS1qdW1wJyxcbiAgICAgIG5hbWU6ICdKdW1wIHRvIERvY3VtZW50JyxcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgIG5ldyBKdW1wTW9kYWwodGhpcy5hcHApLm9wZW4oKTtcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICAvLyBBZGQgY29tbWFuZDogUmVidWlsZCBJbmRleFxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ3NhZ2UtYWktcmVpbmRleCcsXG4gICAgICBuYW1lOiAnUmVidWlsZCBJbmRleCcsXG4gICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICBuZXcgSW5kZXhNb2RhbCh0aGlzLmFwcCwgdGhpcy5pbmRleGVyKS5vcGVuKCk7XG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgLy8gQWRkIGNvbW1hbmQ6IENoZWNrIFN0YXR1c1xuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ3NhZ2UtYWktc3RhdHVzJyxcbiAgICAgIG5hbWU6ICdDaGVjayBDb25uZWN0aW9uIFN0YXR1cycsXG4gICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCB0aGlzLmNoZWNrU3RhdHVzKCk7XG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgLy8gQWRkIHNldHRpbmdzIHRhYlxuICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgU2FnZUFJU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXG4gIH1cblxuICBwcml2YXRlIGluaXRpYWxpemVTZXJ2aWNlcygpIHtcbiAgICB0aGlzLm9sbGFtYSA9IG5ldyBPbGxhbWFTZXJ2aWNlKHtcbiAgICAgIGJhc2VVcmw6IHRoaXMuc2V0dGluZ3Mub2xsYW1hVXJsLFxuICAgICAgbW9kZWw6IHRoaXMuc2V0dGluZ3Mub2xsYW1hTW9kZWwsXG4gICAgfSk7XG5cbiAgICB0aGlzLnFkcmFudCA9IG5ldyBRZHJhbnRTZXJ2aWNlKHtcbiAgICAgIGJhc2VVcmw6IHRoaXMuc2V0dGluZ3MucWRyYW50VXJsLFxuICAgICAgY29sbGVjdGlvbjogdGhpcy5zZXR0aW5ncy5xZHJhbnRDb2xsZWN0aW9uLFxuICAgIH0pO1xuXG4gICAgdGhpcy5pbmRleGVyID0gbmV3IERvY3VtZW50SW5kZXhlcih7XG4gICAgICBvbGxhbWE6IHRoaXMub2xsYW1hLFxuICAgICAgcWRyYW50OiB0aGlzLnFkcmFudCxcbiAgICAgIGFwcDogdGhpcy5hcHAsXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIG9wZW5TZWFyY2hNb2RhbCgpIHtcbiAgICAvLyBRdWljayBoZWFsdGggY2hlY2sgYmVmb3JlIG9wZW5pbmdcbiAgICBjb25zdCBoZWFsdGggPSBhd2FpdCB0aGlzLmluZGV4ZXIuaGVhbHRoQ2hlY2soKTtcblxuICAgIGlmICghaGVhbHRoLm9sbGFtYS5oZWFsdGh5KSB7XG4gICAgICBuZXcgTm90aWNlKGBTYWdlIEFJOiAke2hlYWx0aC5vbGxhbWEubWVzc2FnZX1gKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIWhlYWx0aC5xZHJhbnQuaGVhbHRoeSkge1xuICAgICAgbmV3IE5vdGljZShgU2FnZSBBSTogJHtoZWFsdGgucWRyYW50Lm1lc3NhZ2V9LiBSdW4gXCJSZWJ1aWxkIEluZGV4XCIgZmlyc3QuYCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbmV3IFNlYXJjaE1vZGFsKFxuICAgICAgdGhpcy5hcHAsXG4gICAgICB0aGlzLmluZGV4ZXIsXG4gICAgICB0aGlzLnNldHRpbmdzLm1heFJlc3VsdHMsXG4gICAgICB0aGlzLnNldHRpbmdzLm1pblNjb3JlXG4gICAgKS5vcGVuKCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGNoZWNrU3RhdHVzKCkge1xuICAgIG5ldyBOb3RpY2UoJ1NhZ2UgQUk6IENoZWNraW5nIGNvbm5lY3Rpb25zLi4uJyk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgaGVhbHRoID0gYXdhaXQgdGhpcy5pbmRleGVyLmhlYWx0aENoZWNrKCk7XG4gICAgICBjb25zdCBzdGF0cyA9IGF3YWl0IHRoaXMuaW5kZXhlci5nZXRTdGF0cygpO1xuXG4gICAgICBsZXQgbWVzc2FnZSA9ICdTYWdlIEFJIFN0YXR1czpcXG4nO1xuICAgICAgbWVzc2FnZSArPSBgXFxuT2xsYW1hOiAke2hlYWx0aC5vbGxhbWEuaGVhbHRoeSA/ICdcdTI3MTMnIDogJ1x1MjcxNyd9ICR7aGVhbHRoLm9sbGFtYS5tZXNzYWdlfWA7XG4gICAgICBtZXNzYWdlICs9IGBcXG5RZHJhbnQ6ICR7aGVhbHRoLnFkcmFudC5oZWFsdGh5ID8gJ1x1MjcxMycgOiAnXHUyNzE3J30gJHtoZWFsdGgucWRyYW50Lm1lc3NhZ2V9YDtcblxuICAgICAgaWYgKHN0YXRzKSB7XG4gICAgICAgIG1lc3NhZ2UgKz0gYFxcblxcbkluZGV4ZWQgZG9jdW1lbnRzOiAke3N0YXRzLnRvdGFsRG9jdW1lbnRzfWA7XG4gICAgICB9XG5cbiAgICAgIG5ldyBOb3RpY2UobWVzc2FnZSwgMTAwMDApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBuZXcgTm90aWNlKFxuICAgICAgICBgU2FnZSBBSTogRXJyb3IgY2hlY2tpbmcgc3RhdHVzIC0gJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIG9udW5sb2FkKCkge1xuICAgIC8vIENsZWFuIHVwIHJlc291cmNlcyBpZiBuZWVkZWRcbiAgfVxuXG4gIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcbiAgfVxuXG4gIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcbiAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuXG4gICAgLy8gVXBkYXRlIHNlcnZpY2UgY29uZmlndXJhdGlvbnNcbiAgICBpZiAodGhpcy5vbGxhbWEpIHtcbiAgICAgIHRoaXMub2xsYW1hLnVwZGF0ZUNvbmZpZyh7XG4gICAgICAgIGJhc2VVcmw6IHRoaXMuc2V0dGluZ3Mub2xsYW1hVXJsLFxuICAgICAgICBtb2RlbDogdGhpcy5zZXR0aW5ncy5vbGxhbWFNb2RlbCxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnFkcmFudCkge1xuICAgICAgdGhpcy5xZHJhbnQudXBkYXRlQ29uZmlnKHtcbiAgICAgICAgYmFzZVVybDogdGhpcy5zZXR0aW5ncy5xZHJhbnRVcmwsXG4gICAgICAgIGNvbGxlY3Rpb246IHRoaXMuc2V0dGluZ3MucWRyYW50Q29sbGVjdGlvbixcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuXG5jbGFzcyBTYWdlQUlTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG4gIHBsdWdpbjogU2FnZUFJUGx1Z2luO1xuXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFNhZ2VBSVBsdWdpbikge1xuICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgfVxuXG4gIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcblxuICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cbiAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdTYWdlIEFJIFNldHRpbmdzJyB9KTtcblxuICAgIC8vIE9sbGFtYSBTZXR0aW5nc1xuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ09sbGFtYSBDb25maWd1cmF0aW9uJyB9KTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ09sbGFtYSBVUkwnKVxuICAgICAgLnNldERlc2MoJ1VSTCBvZiB5b3VyIE9sbGFtYSBzZXJ2ZXInKVxuICAgICAgLmFkZFRleHQoKHRleHQpID0+XG4gICAgICAgIHRleHRcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ2h0dHA6Ly8xMjcuMC4wLjE6MTE0MzQnKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5vbGxhbWFVcmwpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mub2xsYW1hVXJsID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0VtYmVkZGluZyBNb2RlbCcpXG4gICAgICAuc2V0RGVzYygnT2xsYW1hIG1vZGVsIGZvciBnZW5lcmF0aW5nIGVtYmVkZGluZ3MgKGJnZS1tMyByZWNvbW1lbmRlZCknKVxuICAgICAgLmFkZFRleHQoKHRleHQpID0+XG4gICAgICAgIHRleHRcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ2JnZS1tMycpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm9sbGFtYU1vZGVsKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm9sbGFtYU1vZGVsID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIC8vIFFkcmFudCBTZXR0aW5nc1xuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1FkcmFudCBDb25maWd1cmF0aW9uJyB9KTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ1FkcmFudCBVUkwnKVxuICAgICAgLnNldERlc2MoJ1VSTCBvZiB5b3VyIFFkcmFudCBzZXJ2ZXInKVxuICAgICAgLmFkZFRleHQoKHRleHQpID0+XG4gICAgICAgIHRleHRcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ2h0dHA6Ly8xMjcuMC4wLjE6NjMzMycpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnFkcmFudFVybClcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5xZHJhbnRVcmwgPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnQ29sbGVjdGlvbiBOYW1lJylcbiAgICAgIC5zZXREZXNjKCdRZHJhbnQgY29sbGVjdGlvbiBuYW1lIGZvciBzdG9yaW5nIHZlY3RvcnMnKVxuICAgICAgLmFkZFRleHQoKHRleHQpID0+XG4gICAgICAgIHRleHRcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ29ic2lkaWFuX2RvY3MnKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5xZHJhbnRDb2xsZWN0aW9uKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnFkcmFudENvbGxlY3Rpb24gPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgLy8gU2VhcmNoIFNldHRpbmdzXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnU2VhcmNoIENvbmZpZ3VyYXRpb24nIH0pO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnTWF4IFJlc3VsdHMnKVxuICAgICAgLnNldERlc2MoJ01heGltdW0gbnVtYmVyIG9mIHNlYXJjaCByZXN1bHRzIHRvIHJldHVybicpXG4gICAgICAuYWRkU2xpZGVyKChzbGlkZXIpID0+XG4gICAgICAgIHNsaWRlclxuICAgICAgICAgIC5zZXRMaW1pdHMoMSwgMjAsIDEpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm1heFJlc3VsdHMpXG4gICAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tYXhSZXN1bHRzID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ01pbmltdW0gU2NvcmUnKVxuICAgICAgLnNldERlc2MoJ01pbmltdW0gc2ltaWxhcml0eSBzY29yZSBmb3IgcmVzdWx0cyAoMC0xKScpXG4gICAgICAuYWRkU2xpZGVyKChzbGlkZXIpID0+XG4gICAgICAgIHNsaWRlclxuICAgICAgICAgIC5zZXRMaW1pdHMoMCwgMSwgMC4wNSlcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubWluU2NvcmUpXG4gICAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5taW5TY29yZSA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAvLyBDb25uZWN0aW9uIFRlc3RcbiAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdDb25uZWN0aW9uIFRlc3QnIH0pO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnVGVzdCBDb25uZWN0aW9ucycpXG4gICAgICAuc2V0RGVzYygnVGVzdCBjb25uZWN0aW9uIHRvIE9sbGFtYSBhbmQgUWRyYW50IHNlcnZlcnMnKVxuICAgICAgLmFkZEJ1dHRvbigoYnV0dG9uKSA9PlxuICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnVGVzdCcpLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdUZXN0aW5nLi4uJyk7XG4gICAgICAgICAgYnV0dG9uLnNldERpc2FibGVkKHRydWUpO1xuXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IG9sbGFtYSA9IG5ldyBPbGxhbWFTZXJ2aWNlKHtcbiAgICAgICAgICAgICAgYmFzZVVybDogdGhpcy5wbHVnaW4uc2V0dGluZ3Mub2xsYW1hVXJsLFxuICAgICAgICAgICAgICBtb2RlbDogdGhpcy5wbHVnaW4uc2V0dGluZ3Mub2xsYW1hTW9kZWwsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHFkcmFudCA9IG5ldyBRZHJhbnRTZXJ2aWNlKHtcbiAgICAgICAgICAgICAgYmFzZVVybDogdGhpcy5wbHVnaW4uc2V0dGluZ3MucWRyYW50VXJsLFxuICAgICAgICAgICAgICBjb2xsZWN0aW9uOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5xZHJhbnRDb2xsZWN0aW9uLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IFtvbGxhbWFIZWFsdGgsIHFkcmFudEhlYWx0aF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgIG9sbGFtYS5oZWFsdGhDaGVjaygpLFxuICAgICAgICAgICAgICBxZHJhbnQuaGVhbHRoQ2hlY2soKSxcbiAgICAgICAgICAgIF0pO1xuXG4gICAgICAgICAgICBsZXQgbWVzc2FnZSA9ICcnO1xuICAgICAgICAgICAgbWVzc2FnZSArPSBgT2xsYW1hOiAke29sbGFtYUhlYWx0aC5oZWFsdGh5ID8gJ1x1MjcxMycgOiAnXHUyNzE3J30gJHtvbGxhbWFIZWFsdGgubWVzc2FnZX1cXG5gO1xuICAgICAgICAgICAgbWVzc2FnZSArPSBgUWRyYW50OiAke3FkcmFudEhlYWx0aC5oZWFsdGh5ID8gJ1x1MjcxMycgOiAnXHUyNzE3J30gJHtxZHJhbnRIZWFsdGgubWVzc2FnZX1gO1xuXG4gICAgICAgICAgICBuZXcgTm90aWNlKG1lc3NhZ2UsIDgwMDApO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFxuICAgICAgICAgICAgICBgRXJyb3I6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVGVzdCBmYWlsZWQnfWBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdUZXN0Jyk7XG4gICAgICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQoZmFsc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICk7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyByZXF1ZXN0VXJsIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5leHBvcnQgaW50ZXJmYWNlIE9sbGFtYUVtYmVkZGluZ1Jlc3BvbnNlIHtcbiAgZW1iZWRkaW5nOiBudW1iZXJbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBPbGxhbWFTZXJ2aWNlQ29uZmlnIHtcbiAgYmFzZVVybDogc3RyaW5nO1xuICBtb2RlbDogc3RyaW5nO1xufVxuXG5leHBvcnQgY2xhc3MgT2xsYW1hU2VydmljZSB7XG4gIHByaXZhdGUgYmFzZVVybDogc3RyaW5nO1xuICBwcml2YXRlIG1vZGVsOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBPbGxhbWFTZXJ2aWNlQ29uZmlnKSB7XG4gICAgdGhpcy5iYXNlVXJsID0gY29uZmlnLmJhc2VVcmwucmVwbGFjZSgvXFwvJC8sICcnKTtcbiAgICB0aGlzLm1vZGVsID0gY29uZmlnLm1vZGVsO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIGVtYmVkZGluZ3MgZm9yIHRoZSBnaXZlbiB0ZXh0XG4gICAqL1xuICBhc3luYyBnZXRFbWJlZGRpbmcodGV4dDogc3RyaW5nKTogUHJvbWlzZTxudW1iZXJbXT4ge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybCh7XG4gICAgICB1cmw6IGAke3RoaXMuYmFzZVVybH0vYXBpL2VtYmVkZGluZ3NgLFxuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBtb2RlbDogdGhpcy5tb2RlbCxcbiAgICAgICAgcHJvbXB0OiB0ZXh0LFxuICAgICAgfSksXG4gICAgfSk7XG5cbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzICE9PSAyMDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgT2xsYW1hIEFQSSBlcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgfVxuXG4gICAgY29uc3QgZGF0YSA9IHJlc3BvbnNlLmpzb24gYXMgT2xsYW1hRW1iZWRkaW5nUmVzcG9uc2U7XG4gICAgcmV0dXJuIGRhdGEuZW1iZWRkaW5nO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIGVtYmVkZGluZ3MgZm9yIG11bHRpcGxlIHRleHRzIGluIGJhdGNoXG4gICAqL1xuICBhc3luYyBnZXRFbWJlZGRpbmdzKHRleHRzOiBzdHJpbmdbXSk6IFByb21pc2U8bnVtYmVyW11bXT4ge1xuICAgIGNvbnN0IGVtYmVkZGluZ3M6IG51bWJlcltdW10gPSBbXTtcbiAgICBmb3IgKGNvbnN0IHRleHQgb2YgdGV4dHMpIHtcbiAgICAgIGNvbnN0IGVtYmVkZGluZyA9IGF3YWl0IHRoaXMuZ2V0RW1iZWRkaW5nKHRleHQpO1xuICAgICAgZW1iZWRkaW5ncy5wdXNoKGVtYmVkZGluZyk7XG4gICAgfVxuICAgIHJldHVybiBlbWJlZGRpbmdzO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIE9sbGFtYSBzZXJ2ZXIgaXMgcmVhY2hhYmxlIGFuZCB0aGUgbW9kZWwgaXMgYXZhaWxhYmxlXG4gICAqL1xuICBhc3luYyBoZWFsdGhDaGVjaygpOiBQcm9taXNlPHsgaGVhbHRoeTogYm9vbGVhbjsgbWVzc2FnZTogc3RyaW5nIH0+IHtcbiAgICB0cnkge1xuICAgICAgLy8gQ2hlY2sgc2VydmVyIGlzIHJ1bm5pbmdcbiAgICAgIGNvbnN0IHRhZ3NSZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoe1xuICAgICAgICB1cmw6IGAke3RoaXMuYmFzZVVybH0vYXBpL3RhZ3NgLFxuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgfSk7XG5cbiAgICAgIGlmICh0YWdzUmVzcG9uc2Uuc3RhdHVzICE9PSAyMDApIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBoZWFsdGh5OiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiBgT2xsYW1hIHNlcnZlciByZXR1cm5lZCBzdGF0dXMgJHt0YWdzUmVzcG9uc2Uuc3RhdHVzfWAsXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIENoZWNrIGlmIG1vZGVsIGlzIGF2YWlsYWJsZVxuICAgICAgY29uc3QgbW9kZWxzID0gdGFnc1Jlc3BvbnNlLmpzb24/Lm1vZGVscyB8fCBbXTtcbiAgICAgIGNvbnN0IG1vZGVsTmFtZXMgPSBtb2RlbHMubWFwKChtOiB7IG5hbWU6IHN0cmluZyB9KSA9PiBtLm5hbWUpO1xuICAgICAgY29uc3QgaGFzTW9kZWwgPSBtb2RlbE5hbWVzLnNvbWUoXG4gICAgICAgIChuYW1lOiBzdHJpbmcpID0+XG4gICAgICAgICAgbmFtZSA9PT0gdGhpcy5tb2RlbCB8fCBuYW1lLnN0YXJ0c1dpdGgoYCR7dGhpcy5tb2RlbH06YClcbiAgICAgICk7XG5cbiAgICAgIGlmICghaGFzTW9kZWwpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBoZWFsdGh5OiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiBgTW9kZWwgJyR7dGhpcy5tb2RlbH0nIG5vdCBmb3VuZC4gQXZhaWxhYmxlOiAke21vZGVsTmFtZXMuam9pbignLCAnKX1gLFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBoZWFsdGh5OiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiBgQ29ubmVjdGVkIHRvIE9sbGFtYSB3aXRoIG1vZGVsICcke3RoaXMubW9kZWx9J2AsXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBoZWFsdGh5OiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogYENhbm5vdCBjb25uZWN0IHRvIE9sbGFtYTogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gLFxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIHNlcnZpY2UgY29uZmlndXJhdGlvblxuICAgKi9cbiAgdXBkYXRlQ29uZmlnKGNvbmZpZzogUGFydGlhbDxPbGxhbWFTZXJ2aWNlQ29uZmlnPikge1xuICAgIGlmIChjb25maWcuYmFzZVVybCkge1xuICAgICAgdGhpcy5iYXNlVXJsID0gY29uZmlnLmJhc2VVcmwucmVwbGFjZSgvXFwvJC8sICcnKTtcbiAgICB9XG4gICAgaWYgKGNvbmZpZy5tb2RlbCkge1xuICAgICAgdGhpcy5tb2RlbCA9IGNvbmZpZy5tb2RlbDtcbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgeyByZXF1ZXN0VXJsIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5leHBvcnQgaW50ZXJmYWNlIFFkcmFudFBvaW50IHtcbiAgaWQ6IHN0cmluZyB8IG51bWJlcjtcbiAgdmVjdG9yOiBudW1iZXJbXTtcbiAgcGF5bG9hZDogUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUWRyYW50U2VhcmNoUmVzdWx0IHtcbiAgaWQ6IHN0cmluZyB8IG51bWJlcjtcbiAgc2NvcmU6IG51bWJlcjtcbiAgcGF5bG9hZDogUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUWRyYW50U2VydmljZUNvbmZpZyB7XG4gIGJhc2VVcmw6IHN0cmluZztcbiAgY29sbGVjdGlvbjogc3RyaW5nO1xufVxuXG5leHBvcnQgY2xhc3MgUWRyYW50U2VydmljZSB7XG4gIHByaXZhdGUgYmFzZVVybDogc3RyaW5nO1xuICBwcml2YXRlIGNvbGxlY3Rpb246IHN0cmluZztcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IFFkcmFudFNlcnZpY2VDb25maWcpIHtcbiAgICB0aGlzLmJhc2VVcmwgPSBjb25maWcuYmFzZVVybC5yZXBsYWNlKC9cXC8kLywgJycpO1xuICAgIHRoaXMuY29sbGVjdGlvbiA9IGNvbmZpZy5jb2xsZWN0aW9uO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlYXJjaCBmb3Igc2ltaWxhciB2ZWN0b3JzXG4gICAqL1xuICBhc3luYyBzZWFyY2goXG4gICAgdmVjdG9yOiBudW1iZXJbXSxcbiAgICBsaW1pdDogbnVtYmVyID0gMTAsXG4gICAgc2NvcmVUaHJlc2hvbGQ6IG51bWJlciA9IDAuMFxuICApOiBQcm9taXNlPFFkcmFudFNlYXJjaFJlc3VsdFtdPiB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHtcbiAgICAgIHVybDogYCR7dGhpcy5iYXNlVXJsfS9jb2xsZWN0aW9ucy8ke3RoaXMuY29sbGVjdGlvbn0vcG9pbnRzL3NlYXJjaGAsXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHZlY3RvcixcbiAgICAgICAgbGltaXQsXG4gICAgICAgIHNjb3JlX3RocmVzaG9sZDogc2NvcmVUaHJlc2hvbGQsXG4gICAgICAgIHdpdGhfcGF5bG9hZDogdHJ1ZSxcbiAgICAgIH0pLFxuICAgIH0pO1xuXG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyAhPT0gMjAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFFkcmFudCBzZWFyY2ggZXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgIH1cblxuICAgIHJldHVybiByZXNwb25zZS5qc29uLnJlc3VsdCB8fCBbXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcHNlcnQgcG9pbnRzIChpbnNlcnQgb3IgdXBkYXRlKVxuICAgKi9cbiAgYXN5bmMgdXBzZXJ0KHBvaW50czogUWRyYW50UG9pbnRbXSk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybCh7XG4gICAgICB1cmw6IGAke3RoaXMuYmFzZVVybH0vY29sbGVjdGlvbnMvJHt0aGlzLmNvbGxlY3Rpb259L3BvaW50c2AsXG4gICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgcG9pbnRzOiBwb2ludHMubWFwKChwKSA9PiAoe1xuICAgICAgICAgIGlkOiBwLmlkLFxuICAgICAgICAgIHZlY3RvcjogcC52ZWN0b3IsXG4gICAgICAgICAgcGF5bG9hZDogcC5wYXlsb2FkLFxuICAgICAgICB9KSksXG4gICAgICB9KSxcbiAgICB9KTtcblxuICAgIGlmIChyZXNwb25zZS5zdGF0dXMgIT09IDIwMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBRZHJhbnQgdXBzZXJ0IGVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGVsZXRlIHBvaW50cyBieSBJRHNcbiAgICovXG4gIGFzeW5jIGRlbGV0ZShpZHM6IChzdHJpbmcgfCBudW1iZXIpW10pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoe1xuICAgICAgdXJsOiBgJHt0aGlzLmJhc2VVcmx9L2NvbGxlY3Rpb25zLyR7dGhpcy5jb2xsZWN0aW9ufS9wb2ludHMvZGVsZXRlYCxcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgcG9pbnRzOiBpZHMsXG4gICAgICB9KSxcbiAgICB9KTtcblxuICAgIGlmIChyZXNwb25zZS5zdGF0dXMgIT09IDIwMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBRZHJhbnQgZGVsZXRlIGVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGVsZXRlIHBvaW50cyBieSBmaWx0ZXIgKGUuZy4sIGJ5IGZpbGUgcGF0aClcbiAgICovXG4gIGFzeW5jIGRlbGV0ZUJ5RmlsdGVyKGZpbHRlcjogUmVjb3JkPHN0cmluZywgdW5rbm93bj4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoe1xuICAgICAgdXJsOiBgJHt0aGlzLmJhc2VVcmx9L2NvbGxlY3Rpb25zLyR7dGhpcy5jb2xsZWN0aW9ufS9wb2ludHMvZGVsZXRlYCxcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgZmlsdGVyLFxuICAgICAgfSksXG4gICAgfSk7XG5cbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzICE9PSAyMDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgUWRyYW50IGRlbGV0ZSBieSBmaWx0ZXIgZXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY29sbGVjdGlvbiBpbmZvXG4gICAqL1xuICBhc3luYyBnZXRDb2xsZWN0aW9uSW5mbygpOiBQcm9taXNlPFJlY29yZDxzdHJpbmcsIHVua25vd24+IHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoe1xuICAgICAgICB1cmw6IGAke3RoaXMuYmFzZVVybH0vY29sbGVjdGlvbnMvJHt0aGlzLmNvbGxlY3Rpb259YCxcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzICE9PSAyMDApIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXNwb25zZS5qc29uLnJlc3VsdDtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgY29sbGVjdGlvbiBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gICAqL1xuICBhc3luYyBlbnN1cmVDb2xsZWN0aW9uKHZlY3RvclNpemU6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGluZm8gPSBhd2FpdCB0aGlzLmdldENvbGxlY3Rpb25JbmZvKCk7XG4gICAgaWYgKGluZm8pIHtcbiAgICAgIHJldHVybjsgLy8gQ29sbGVjdGlvbiBleGlzdHNcbiAgICB9XG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoe1xuICAgICAgdXJsOiBgJHt0aGlzLmJhc2VVcmx9L2NvbGxlY3Rpb25zLyR7dGhpcy5jb2xsZWN0aW9ufWAsXG4gICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgdmVjdG9yczoge1xuICAgICAgICAgIHNpemU6IHZlY3RvclNpemUsXG4gICAgICAgICAgZGlzdGFuY2U6ICdDb3NpbmUnLFxuICAgICAgICB9LFxuICAgICAgfSksXG4gICAgfSk7XG5cbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzICE9PSAyMDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGNyZWF0ZSBjb2xsZWN0aW9uOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgUWRyYW50IHNlcnZlciBpcyByZWFjaGFibGUgYW5kIGNvbGxlY3Rpb24gZXhpc3RzXG4gICAqL1xuICBhc3luYyBoZWFsdGhDaGVjaygpOiBQcm9taXNlPHsgaGVhbHRoeTogYm9vbGVhbjsgbWVzc2FnZTogc3RyaW5nIH0+IHtcbiAgICB0cnkge1xuICAgICAgLy8gQ2hlY2sgc2VydmVyIGlzIHJ1bm5pbmdcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybCh7XG4gICAgICAgIHVybDogYCR7dGhpcy5iYXNlVXJsfS9jb2xsZWN0aW9uc2AsXG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICB9KTtcblxuICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyAhPT0gMjAwKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaGVhbHRoeTogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogYFFkcmFudCBzZXJ2ZXIgcmV0dXJuZWQgc3RhdHVzICR7cmVzcG9uc2Uuc3RhdHVzfWAsXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIENoZWNrIGlmIGNvbGxlY3Rpb24gZXhpc3RzXG4gICAgICBjb25zdCBjb2xsZWN0aW9ucyA9IHJlc3BvbnNlLmpzb24/LnJlc3VsdD8uY29sbGVjdGlvbnMgfHwgW107XG4gICAgICBjb25zdCBoYXNDb2xsZWN0aW9uID0gY29sbGVjdGlvbnMuc29tZShcbiAgICAgICAgKGM6IHsgbmFtZTogc3RyaW5nIH0pID0+IGMubmFtZSA9PT0gdGhpcy5jb2xsZWN0aW9uXG4gICAgICApO1xuXG4gICAgICBpZiAoIWhhc0NvbGxlY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBoZWFsdGh5OiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiBgQ29sbGVjdGlvbiAnJHt0aGlzLmNvbGxlY3Rpb259JyBub3QgZm91bmQuIFJ1biBpbmRleCBmaXJzdC5gLFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBoZWFsdGh5OiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiBgQ29ubmVjdGVkIHRvIFFkcmFudCB3aXRoIGNvbGxlY3Rpb24gJyR7dGhpcy5jb2xsZWN0aW9ufSdgLFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaGVhbHRoeTogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6IGBDYW5ub3QgY29ubmVjdCB0byBRZHJhbnQ6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCxcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbGwgcG9pbnQgSURzIGluIHRoZSBjb2xsZWN0aW9uXG4gICAqL1xuICBhc3luYyBnZXRBbGxQb2ludElkcygpOiBQcm9taXNlPChzdHJpbmcgfCBudW1iZXIpW10+IHtcbiAgICBjb25zdCBpZHM6IChzdHJpbmcgfCBudW1iZXIpW10gPSBbXTtcbiAgICBsZXQgb2Zmc2V0OiBzdHJpbmcgfCBudW1iZXIgfCBudWxsID0gbnVsbDtcbiAgICBjb25zdCBsaW1pdCA9IDEwMDtcblxuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICBjb25zdCBib2R5OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiA9IHtcbiAgICAgICAgbGltaXQsXG4gICAgICAgIHdpdGhfcGF5bG9hZDogZmFsc2UsXG4gICAgICAgIHdpdGhfdmVjdG9yOiBmYWxzZSxcbiAgICAgIH07XG5cbiAgICAgIGlmIChvZmZzZXQgIT09IG51bGwpIHtcbiAgICAgICAgYm9keS5vZmZzZXQgPSBvZmZzZXQ7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybCh7XG4gICAgICAgIHVybDogYCR7dGhpcy5iYXNlVXJsfS9jb2xsZWN0aW9ucy8ke3RoaXMuY29sbGVjdGlvbn0vcG9pbnRzL3Njcm9sbGAsXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSksXG4gICAgICB9KTtcblxuICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyAhPT0gMjAwKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBwb2ludHMgPSByZXNwb25zZS5qc29uPy5yZXN1bHQ/LnBvaW50cyB8fCBbXTtcbiAgICAgIGZvciAoY29uc3QgcG9pbnQgb2YgcG9pbnRzKSB7XG4gICAgICAgIGlkcy5wdXNoKHBvaW50LmlkKTtcbiAgICAgIH1cblxuICAgICAgb2Zmc2V0ID0gcmVzcG9uc2UuanNvbj8ucmVzdWx0Py5uZXh0X3BhZ2Vfb2Zmc2V0O1xuICAgICAgaWYgKCFvZmZzZXQpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGlkcztcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgc2VydmljZSBjb25maWd1cmF0aW9uXG4gICAqL1xuICB1cGRhdGVDb25maWcoY29uZmlnOiBQYXJ0aWFsPFFkcmFudFNlcnZpY2VDb25maWc+KSB7XG4gICAgaWYgKGNvbmZpZy5iYXNlVXJsKSB7XG4gICAgICB0aGlzLmJhc2VVcmwgPSBjb25maWcuYmFzZVVybC5yZXBsYWNlKC9cXC8kLywgJycpO1xuICAgIH1cbiAgICBpZiAoY29uZmlnLmNvbGxlY3Rpb24pIHtcbiAgICAgIHRoaXMuY29sbGVjdGlvbiA9IGNvbmZpZy5jb2xsZWN0aW9uO1xuICAgIH1cbiAgfVxufVxuIiwgImltcG9ydCB7IEFwcCwgVEZpbGUsIE5vdGljZSwgbm9ybWFsaXplUGF0aCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IE9sbGFtYVNlcnZpY2UgfSBmcm9tICcuL29sbGFtYSc7XG5pbXBvcnQgeyBRZHJhbnRTZXJ2aWNlIH0gZnJvbSAnLi9xZHJhbnQnO1xuaW1wb3J0IHsgRG9jdW1lbnRNZXRhZGF0YSwgSW5kZXhTdGF0cyB9IGZyb20gJy4uL3R5cGVzJztcblxuLy8gQkdFLU0zIHByb2R1Y2VzIDEwMjQtZGltZW5zaW9uYWwgZW1iZWRkaW5nc1xuY29uc3QgVkVDVE9SX1NJWkUgPSAxMDI0O1xuXG5leHBvcnQgaW50ZXJmYWNlIEluZGV4ZXJDb25maWcge1xuICBvbGxhbWE6IE9sbGFtYVNlcnZpY2U7XG4gIHFkcmFudDogUWRyYW50U2VydmljZTtcbiAgYXBwOiBBcHA7XG59XG5cbmV4cG9ydCBjbGFzcyBEb2N1bWVudEluZGV4ZXIge1xuICBwcml2YXRlIG9sbGFtYTogT2xsYW1hU2VydmljZTtcbiAgcHJpdmF0ZSBxZHJhbnQ6IFFkcmFudFNlcnZpY2U7XG4gIHByaXZhdGUgYXBwOiBBcHA7XG4gIHByaXZhdGUgaXNJbmRleGluZzogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogSW5kZXhlckNvbmZpZykge1xuICAgIHRoaXMub2xsYW1hID0gY29uZmlnLm9sbGFtYTtcbiAgICB0aGlzLnFkcmFudCA9IGNvbmZpZy5xZHJhbnQ7XG4gICAgdGhpcy5hcHAgPSBjb25maWcuYXBwO1xuICB9XG5cbiAgLyoqXG4gICAqIEluZGV4IGFsbCBtYXJrZG93biBmaWxlcyBpbiB0aGUgdmF1bHRcbiAgICovXG4gIGFzeW5jIGluZGV4VmF1bHQoXG4gICAgb25Qcm9ncmVzcz86IChjdXJyZW50OiBudW1iZXIsIHRvdGFsOiBudW1iZXIsIGZpbGU6IHN0cmluZykgPT4gdm9pZFxuICApOiBQcm9taXNlPEluZGV4U3RhdHM+IHtcbiAgICBpZiAodGhpcy5pc0luZGV4aW5nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0luZGV4aW5nIGFscmVhZHkgaW4gcHJvZ3Jlc3MnKTtcbiAgICB9XG5cbiAgICB0aGlzLmlzSW5kZXhpbmcgPSB0cnVlO1xuICAgIGxldCBpbmRleGVkID0gMDtcblxuICAgIHRyeSB7XG4gICAgICAvLyBFbnN1cmUgY29sbGVjdGlvbiBleGlzdHNcbiAgICAgIGF3YWl0IHRoaXMucWRyYW50LmVuc3VyZUNvbGxlY3Rpb24oVkVDVE9SX1NJWkUpO1xuXG4gICAgICAvLyBHZXQgYWxsIG1hcmtkb3duIGZpbGVzXG4gICAgICBjb25zdCBmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgIGNvbnN0IHRvdGFsID0gZmlsZXMubGVuZ3RoO1xuXG4gICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmluZGV4RmlsZShmaWxlKTtcbiAgICAgICAgICBpbmRleGVkKys7XG4gICAgICAgICAgb25Qcm9ncmVzcz8uKGluZGV4ZWQsIHRvdGFsLCBmaWxlLnBhdGgpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBpbmRleCAke2ZpbGUucGF0aH06YCwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRvdGFsRG9jdW1lbnRzOiBpbmRleGVkLFxuICAgICAgICBsYXN0SW5kZXhlZDogRGF0ZS5ub3coKSxcbiAgICAgIH07XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMuaXNJbmRleGluZyA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJbmRleCBhIHNpbmdsZSBmaWxlXG4gICAqL1xuICBhc3luYyBpbmRleEZpbGUoZmlsZTogVEZpbGUpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBSZWFkIGZpbGUgY29udGVudFxuICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5jYWNoZWRSZWFkKGZpbGUpO1xuICAgIGlmICghY29udGVudC50cmltKCkpIHtcbiAgICAgIHJldHVybjsgLy8gU2tpcCBlbXB0eSBmaWxlc1xuICAgIH1cblxuICAgIC8vIFByZXBhcmUgdGV4dCBmb3IgZW1iZWRkaW5nICh0aXRsZSArIGNvbnRlbnQpXG4gICAgY29uc3QgdGl0bGUgPSBmaWxlLmJhc2VuYW1lO1xuICAgIGNvbnN0IHRleHRUb0VtYmVkID0gYCR7dGl0bGV9XFxuXFxuJHtjb250ZW50fWA7XG5cbiAgICAvLyBUcnVuY2F0ZSBpZiB0b28gbG9uZyAobW9zdCBtb2RlbHMgaGF2ZSB0b2tlbiBsaW1pdHMpXG4gICAgY29uc3QgbWF4Q2hhcnMgPSA4MDAwO1xuICAgIGNvbnN0IHRydW5jYXRlZFRleHQgPVxuICAgICAgdGV4dFRvRW1iZWQubGVuZ3RoID4gbWF4Q2hhcnNcbiAgICAgICAgPyB0ZXh0VG9FbWJlZC5zdWJzdHJpbmcoMCwgbWF4Q2hhcnMpXG4gICAgICAgIDogdGV4dFRvRW1iZWQ7XG5cbiAgICAvLyBHZW5lcmF0ZSBlbWJlZGRpbmdcbiAgICBjb25zdCBlbWJlZGRpbmcgPSBhd2FpdCB0aGlzLm9sbGFtYS5nZXRFbWJlZGRpbmcodHJ1bmNhdGVkVGV4dCk7XG5cbiAgICAvLyBFeHRyYWN0IG1ldGFkYXRhIGZyb20gZnJvbnRtYXR0ZXJcbiAgICBjb25zdCBtZXRhZGF0YSA9IHRoaXMuZXh0cmFjdE1ldGFkYXRhKGZpbGUsIGNvbnRlbnQpO1xuXG4gICAgLy8gR2VuZXJhdGUgc3RhYmxlIElEIGZyb20gcGF0aFxuICAgIGNvbnN0IGlkID0gdGhpcy5wYXRoVG9JZChmaWxlLnBhdGgpO1xuXG4gICAgLy8gVXBzZXJ0IHRvIFFkcmFudFxuICAgIGF3YWl0IHRoaXMucWRyYW50LnVwc2VydChbXG4gICAgICB7XG4gICAgICAgIGlkLFxuICAgICAgICB2ZWN0b3I6IGVtYmVkZGluZyxcbiAgICAgICAgcGF5bG9hZDoge1xuICAgICAgICAgIHBhdGg6IGZpbGUucGF0aCxcbiAgICAgICAgICB0aXRsZTogbWV0YWRhdGEudGl0bGUsXG4gICAgICAgICAgbXRpbWU6IG1ldGFkYXRhLm10aW1lLFxuICAgICAgICAgIHNpemU6IG1ldGFkYXRhLnNpemUsXG4gICAgICAgICAgdGFnczogbWV0YWRhdGEudGFncyxcbiAgICAgICAgICBhbGlhc2VzOiBtZXRhZGF0YS5hbGlhc2VzLFxuICAgICAgICAgIGV4Y2VycHQ6IGNvbnRlbnQuc3Vic3RyaW5nKDAsIDUwMCksXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIF0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhIGZpbGUgZnJvbSB0aGUgaW5kZXhcbiAgICovXG4gIGFzeW5jIHJlbW92ZUZpbGUocGF0aDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgaWQgPSB0aGlzLnBhdGhUb0lkKHBhdGgpO1xuICAgIGF3YWl0IHRoaXMucWRyYW50LmRlbGV0ZShbaWRdKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZWFyY2ggZm9yIHNpbWlsYXIgZG9jdW1lbnRzXG4gICAqL1xuICBhc3luYyBzZWFyY2goXG4gICAgcXVlcnk6IHN0cmluZyxcbiAgICBsaW1pdDogbnVtYmVyID0gMTAsXG4gICAgbWluU2NvcmU6IG51bWJlciA9IDAuM1xuICApOiBQcm9taXNlPFxuICAgIEFycmF5PHtcbiAgICAgIHBhdGg6IHN0cmluZztcbiAgICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgICBzY29yZTogbnVtYmVyO1xuICAgICAgZXhjZXJwdDogc3RyaW5nO1xuICAgIH0+XG4gID4ge1xuICAgIC8vIEdlbmVyYXRlIGVtYmVkZGluZyBmb3IgcXVlcnlcbiAgICBjb25zdCBxdWVyeUVtYmVkZGluZyA9IGF3YWl0IHRoaXMub2xsYW1hLmdldEVtYmVkZGluZyhxdWVyeSk7XG5cbiAgICAvLyBTZWFyY2ggaW4gUWRyYW50XG4gICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHRoaXMucWRyYW50LnNlYXJjaChxdWVyeUVtYmVkZGluZywgbGltaXQsIG1pblNjb3JlKTtcblxuICAgIHJldHVybiByZXN1bHRzLm1hcCgocikgPT4gKHtcbiAgICAgIHBhdGg6IHIucGF5bG9hZC5wYXRoIGFzIHN0cmluZyxcbiAgICAgIHRpdGxlOiByLnBheWxvYWQudGl0bGUgYXMgc3RyaW5nLFxuICAgICAgc2NvcmU6IHIuc2NvcmUsXG4gICAgICBleGNlcnB0OiAoci5wYXlsb2FkLmV4Y2VycHQgYXMgc3RyaW5nKSB8fCAnJyxcbiAgICB9KSk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgc2VydmljZXMgYXJlIGhlYWx0aHlcbiAgICovXG4gIGFzeW5jIGhlYWx0aENoZWNrKCk6IFByb21pc2U8e1xuICAgIG9sbGFtYTogeyBoZWFsdGh5OiBib29sZWFuOyBtZXNzYWdlOiBzdHJpbmcgfTtcbiAgICBxZHJhbnQ6IHsgaGVhbHRoeTogYm9vbGVhbjsgbWVzc2FnZTogc3RyaW5nIH07XG4gIH0+IHtcbiAgICBjb25zdCBbb2xsYW1hSGVhbHRoLCBxZHJhbnRIZWFsdGhdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgdGhpcy5vbGxhbWEuaGVhbHRoQ2hlY2soKSxcbiAgICAgIHRoaXMucWRyYW50LmhlYWx0aENoZWNrKCksXG4gICAgXSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgb2xsYW1hOiBvbGxhbWFIZWFsdGgsXG4gICAgICBxZHJhbnQ6IHFkcmFudEhlYWx0aCxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBpbmRleCBzdGF0aXN0aWNzXG4gICAqL1xuICBhc3luYyBnZXRTdGF0cygpOiBQcm9taXNlPEluZGV4U3RhdHMgfCBudWxsPiB7XG4gICAgY29uc3QgaW5mbyA9IGF3YWl0IHRoaXMucWRyYW50LmdldENvbGxlY3Rpb25JbmZvKCk7XG4gICAgaWYgKCFpbmZvKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgdG90YWxEb2N1bWVudHM6IChpbmZvIGFzIHsgcG9pbnRzX2NvdW50PzogbnVtYmVyIH0pLnBvaW50c19jb3VudCB8fCAwLFxuICAgICAgbGFzdEluZGV4ZWQ6IG51bGwsIC8vIFFkcmFudCBkb2Vzbid0IHRyYWNrIHRoaXNcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEV4dHJhY3QgbWV0YWRhdGEgZnJvbSBmaWxlXG4gICAqL1xuICBwcml2YXRlIGV4dHJhY3RNZXRhZGF0YShmaWxlOiBURmlsZSwgY29udGVudDogc3RyaW5nKTogRG9jdW1lbnRNZXRhZGF0YSB7XG4gICAgY29uc3QgY2FjaGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcblxuICAgIC8vIEV4dHJhY3QgdGFnc1xuICAgIGNvbnN0IHRhZ3M6IHN0cmluZ1tdID0gW107XG4gICAgaWYgKGNhY2hlPy50YWdzKSB7XG4gICAgICB0YWdzLnB1c2goLi4uY2FjaGUudGFncy5tYXAoKHQpID0+IHQudGFnKSk7XG4gICAgfVxuICAgIGlmIChjYWNoZT8uZnJvbnRtYXR0ZXI/LnRhZ3MpIHtcbiAgICAgIGNvbnN0IGZtVGFncyA9IGNhY2hlLmZyb250bWF0dGVyLnRhZ3M7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShmbVRhZ3MpKSB7XG4gICAgICAgIHRhZ3MucHVzaCguLi5mbVRhZ3MubWFwKCh0KSA9PiAodC5zdGFydHNXaXRoKCcjJykgPyB0IDogYCMke3R9YCkpKTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGZtVGFncyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGFncy5wdXNoKGZtVGFncy5zdGFydHNXaXRoKCcjJykgPyBmbVRhZ3MgOiBgIyR7Zm1UYWdzfWApO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEV4dHJhY3QgYWxpYXNlc1xuICAgIGNvbnN0IGFsaWFzZXM6IHN0cmluZ1tdID0gW107XG4gICAgaWYgKGNhY2hlPy5mcm9udG1hdHRlcj8uYWxpYXNlcykge1xuICAgICAgY29uc3QgZm1BbGlhc2VzID0gY2FjaGUuZnJvbnRtYXR0ZXIuYWxpYXNlcztcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGZtQWxpYXNlcykpIHtcbiAgICAgICAgYWxpYXNlcy5wdXNoKC4uLmZtQWxpYXNlcyk7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBmbUFsaWFzZXMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGFsaWFzZXMucHVzaChmbUFsaWFzZXMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEdldCB0aXRsZSBmcm9tIGZyb250bWF0dGVyIG9yIGZpbGVuYW1lXG4gICAgY29uc3QgdGl0bGUgPSBjYWNoZT8uZnJvbnRtYXR0ZXI/LnRpdGxlIHx8IGZpbGUuYmFzZW5hbWU7XG5cbiAgICByZXR1cm4ge1xuICAgICAgcGF0aDogZmlsZS5wYXRoLFxuICAgICAgdGl0bGUsXG4gICAgICBtdGltZTogZmlsZS5zdGF0Lm10aW1lLFxuICAgICAgc2l6ZTogZmlsZS5zdGF0LnNpemUsXG4gICAgICB0YWdzOiBbLi4ubmV3IFNldCh0YWdzKV0sXG4gICAgICBhbGlhc2VzLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydCBmaWxlIHBhdGggdG8gYSBudW1lcmljIElEIGZvciBRZHJhbnRcbiAgICovXG4gIHByaXZhdGUgcGF0aFRvSWQocGF0aDogc3RyaW5nKTogbnVtYmVyIHtcbiAgICAvLyBTaW1wbGUgaGFzaCBmdW5jdGlvbiB0byBjb252ZXJ0IHBhdGggdG8gbnVtYmVyXG4gICAgbGV0IGhhc2ggPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGF0aC5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgY2hhciA9IHBhdGguY2hhckNvZGVBdChpKTtcbiAgICAgIGhhc2ggPSAoaGFzaCA8PCA1KSAtIGhhc2ggKyBjaGFyO1xuICAgICAgaGFzaCA9IGhhc2ggJiBoYXNoOyAvLyBDb252ZXJ0IHRvIDMyLWJpdCBpbnRlZ2VyXG4gICAgfVxuICAgIHJldHVybiBNYXRoLmFicyhoYXNoKTtcbiAgfVxufVxuIiwgImltcG9ydCB7IEFwcCwgTW9kYWwsIFNldHRpbmcsIE5vdGljZSwgZGVib3VuY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBEb2N1bWVudEluZGV4ZXIgfSBmcm9tICcuLi9zZXJ2aWNlcy9pbmRleGVyJztcblxuaW50ZXJmYWNlIFNlYXJjaFJlc3VsdEl0ZW0ge1xuICBwYXRoOiBzdHJpbmc7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIHNjb3JlOiBudW1iZXI7XG4gIGV4Y2VycHQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGNsYXNzIFNlYXJjaE1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBwcml2YXRlIGluZGV4ZXI6IERvY3VtZW50SW5kZXhlcjtcbiAgcHJpdmF0ZSByZXN1bHRzOiBTZWFyY2hSZXN1bHRJdGVtW10gPSBbXTtcbiAgcHJpdmF0ZSByZXN1bHRzQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBpbnB1dEVsOiBIVE1MSW5wdXRFbGVtZW50O1xuICBwcml2YXRlIHN0YXR1c0VsOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBtYXhSZXN1bHRzOiBudW1iZXI7XG4gIHByaXZhdGUgbWluU2NvcmU6IG51bWJlcjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBhcHA6IEFwcCxcbiAgICBpbmRleGVyOiBEb2N1bWVudEluZGV4ZXIsXG4gICAgbWF4UmVzdWx0czogbnVtYmVyID0gMTAsXG4gICAgbWluU2NvcmU6IG51bWJlciA9IDAuM1xuICApIHtcbiAgICBzdXBlcihhcHApO1xuICAgIHRoaXMuaW5kZXhlciA9IGluZGV4ZXI7XG4gICAgdGhpcy5tYXhSZXN1bHRzID0gbWF4UmVzdWx0cztcbiAgICB0aGlzLm1pblNjb3JlID0gbWluU2NvcmU7XG4gIH1cblxuICBvbk9wZW4oKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgY29udGVudEVsLmFkZENsYXNzKCdzYWdlLWFpLXNlYXJjaC1tb2RhbCcpO1xuXG4gICAgLy8gVGl0bGVcbiAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnU2FnZSBBSTogU2VtYW50aWMgU2VhcmNoJyB9KTtcblxuICAgIC8vIFNlYXJjaCBpbnB1dFxuICAgIGNvbnN0IGlucHV0Q29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdih7XG4gICAgICBjbHM6ICdzYWdlLWFpLXNlYXJjaC1pbnB1dC1jb250YWluZXInLFxuICAgIH0pO1xuXG4gICAgdGhpcy5pbnB1dEVsID0gaW5wdXRDb250YWluZXIuY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgcGxhY2Vob2xkZXI6ICdTZWFyY2ggYnkgbWVhbmluZy4uLicsXG4gICAgICBjbHM6ICdzYWdlLWFpLXNlYXJjaC1pbnB1dCcsXG4gICAgfSk7XG5cbiAgICB0aGlzLmlucHV0RWwuZm9jdXMoKTtcblxuICAgIC8vIFN0YXR1cyBsaW5lXG4gICAgdGhpcy5zdGF0dXNFbCA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdzYWdlLWFpLXNlYXJjaC1zdGF0dXMnIH0pO1xuICAgIHRoaXMuc3RhdHVzRWwuc2V0VGV4dCgnVHlwZSB0byBzZWFyY2gnKTtcblxuICAgIC8vIFJlc3VsdHMgY29udGFpbmVyXG4gICAgdGhpcy5yZXN1bHRzQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdih7XG4gICAgICBjbHM6ICdzYWdlLWFpLXNlYXJjaC1yZXN1bHRzJyxcbiAgICB9KTtcblxuICAgIC8vIERlYm91bmNlZCBzZWFyY2hcbiAgICBjb25zdCBkZWJvdW5jZWRTZWFyY2ggPSBkZWJvdW5jZShcbiAgICAgIGFzeW5jIChxdWVyeTogc3RyaW5nKSA9PiB7XG4gICAgICAgIGlmIChxdWVyeS5sZW5ndGggPCAyKSB7XG4gICAgICAgICAgdGhpcy5zdGF0dXNFbC5zZXRUZXh0KCdUeXBlIGF0IGxlYXN0IDIgY2hhcmFjdGVycycpO1xuICAgICAgICAgIHRoaXMucmVzdWx0c0NvbnRhaW5lci5lbXB0eSgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc3RhdHVzRWwuc2V0VGV4dCgnU2VhcmNoaW5nLi4uJyk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB0aGlzLnJlc3VsdHMgPSBhd2FpdCB0aGlzLmluZGV4ZXIuc2VhcmNoKFxuICAgICAgICAgICAgcXVlcnksXG4gICAgICAgICAgICB0aGlzLm1heFJlc3VsdHMsXG4gICAgICAgICAgICB0aGlzLm1pblNjb3JlXG4gICAgICAgICAgKTtcbiAgICAgICAgICB0aGlzLnJlbmRlclJlc3VsdHMoKTtcblxuICAgICAgICAgIGlmICh0aGlzLnJlc3VsdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXR1c0VsLnNldFRleHQoJ05vIHJlc3VsdHMgZm91bmQnKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdGF0dXNFbC5zZXRUZXh0KFxuICAgICAgICAgICAgICBgRm91bmQgJHt0aGlzLnJlc3VsdHMubGVuZ3RofSByZXN1bHQke3RoaXMucmVzdWx0cy5sZW5ndGggPT09IDEgPyAnJyA6ICdzJ31gXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdTZWFyY2ggZXJyb3I6JywgZXJyb3IpO1xuICAgICAgICAgIHRoaXMuc3RhdHVzRWwuc2V0VGV4dChcbiAgICAgICAgICAgIGBFcnJvcjogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdTZWFyY2ggZmFpbGVkJ31gXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIDMwMCxcbiAgICAgIHRydWVcbiAgICApO1xuXG4gICAgdGhpcy5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgICAgZGVib3VuY2VkU2VhcmNoKHRoaXMuaW5wdXRFbC52YWx1ZSk7XG4gICAgfSk7XG5cbiAgICAvLyBIYW5kbGUga2V5Ym9hcmQgbmF2aWdhdGlvblxuICAgIHRoaXMuaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcbiAgICAgIGlmIChlLmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfSBlbHNlIGlmIChlLmtleSA9PT0gJ0VudGVyJyAmJiB0aGlzLnJlc3VsdHMubGVuZ3RoID4gMCkge1xuICAgICAgICB0aGlzLm9wZW5SZXN1bHQodGhpcy5yZXN1bHRzWzBdKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyUmVzdWx0cygpIHtcbiAgICB0aGlzLnJlc3VsdHNDb250YWluZXIuZW1wdHkoKTtcblxuICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIHRoaXMucmVzdWx0cykge1xuICAgICAgY29uc3QgcmVzdWx0RWwgPSB0aGlzLnJlc3VsdHNDb250YWluZXIuY3JlYXRlRGl2KHtcbiAgICAgICAgY2xzOiAnc2FnZS1haS1zZWFyY2gtcmVzdWx0JyxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBUaXRsZSB3aXRoIHNjb3JlXG4gICAgICBjb25zdCB0aXRsZVJvdyA9IHJlc3VsdEVsLmNyZWF0ZURpdih7IGNsczogJ3NhZ2UtYWktcmVzdWx0LXRpdGxlLXJvdycgfSk7XG4gICAgICB0aXRsZVJvdy5jcmVhdGVTcGFuKHsgdGV4dDogcmVzdWx0LnRpdGxlLCBjbHM6ICdzYWdlLWFpLXJlc3VsdC10aXRsZScgfSk7XG4gICAgICB0aXRsZVJvdy5jcmVhdGVTcGFuKHtcbiAgICAgICAgdGV4dDogYCR7TWF0aC5yb3VuZChyZXN1bHQuc2NvcmUgKiAxMDApfSVgLFxuICAgICAgICBjbHM6ICdzYWdlLWFpLXJlc3VsdC1zY29yZScsXG4gICAgICB9KTtcblxuICAgICAgLy8gUGF0aFxuICAgICAgcmVzdWx0RWwuY3JlYXRlRGl2KHtcbiAgICAgICAgdGV4dDogcmVzdWx0LnBhdGgsXG4gICAgICAgIGNsczogJ3NhZ2UtYWktcmVzdWx0LXBhdGgnLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIEV4Y2VycHRcbiAgICAgIGlmIChyZXN1bHQuZXhjZXJwdCkge1xuICAgICAgICBjb25zdCBleGNlcnB0VGV4dCA9XG4gICAgICAgICAgcmVzdWx0LmV4Y2VycHQubGVuZ3RoID4gMTUwXG4gICAgICAgICAgICA/IHJlc3VsdC5leGNlcnB0LnN1YnN0cmluZygwLCAxNTApICsgJy4uLidcbiAgICAgICAgICAgIDogcmVzdWx0LmV4Y2VycHQ7XG4gICAgICAgIHJlc3VsdEVsLmNyZWF0ZURpdih7XG4gICAgICAgICAgdGV4dDogZXhjZXJwdFRleHQsXG4gICAgICAgICAgY2xzOiAnc2FnZS1haS1yZXN1bHQtZXhjZXJwdCcsXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBDbGljayBoYW5kbGVyXG4gICAgICByZXN1bHRFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgdGhpcy5vcGVuUmVzdWx0KHJlc3VsdCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIG9wZW5SZXN1bHQocmVzdWx0OiBTZWFyY2hSZXN1bHRJdGVtKSB7XG4gICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChyZXN1bHQucGF0aCk7XG4gICAgaWYgKGZpbGUpIHtcbiAgICAgIGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQocmVzdWx0LnBhdGgsICcnLCBmYWxzZSk7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5ldyBOb3RpY2UoYEZpbGUgbm90IGZvdW5kOiAke3Jlc3VsdC5wYXRofWApO1xuICAgIH1cbiAgfVxuXG4gIG9uQ2xvc2UoKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBBcHAsIEZ1enp5U3VnZ2VzdE1vZGFsLCBURmlsZSwgRnV6enlNYXRjaCB9IGZyb20gJ29ic2lkaWFuJztcblxuZXhwb3J0IGNsYXNzIEp1bXBNb2RhbCBleHRlbmRzIEZ1enp5U3VnZ2VzdE1vZGFsPFRGaWxlPiB7XG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG4gICAgc3VwZXIoYXBwKTtcbiAgICB0aGlzLnNldFBsYWNlaG9sZGVyKCdKdW1wIHRvIGRvY3VtZW50Li4uJyk7XG4gICAgdGhpcy5zZXRJbnN0cnVjdGlvbnMoW1xuICAgICAgeyBjb21tYW5kOiAnXHUyMTkxXHUyMTkzJywgcHVycG9zZTogJ25hdmlnYXRlJyB9LFxuICAgICAgeyBjb21tYW5kOiAnXHUyMUI1JywgcHVycG9zZTogJ29wZW4nIH0sXG4gICAgICB7IGNvbW1hbmQ6ICdlc2MnLCBwdXJwb3NlOiAnZGlzbWlzcycgfSxcbiAgICBdKTtcbiAgfVxuXG4gIGdldEl0ZW1zKCk6IFRGaWxlW10ge1xuICAgIHJldHVybiB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCkuc29ydCgoYSwgYikgPT4ge1xuICAgICAgLy8gU29ydCBieSBtb2RpZmljYXRpb24gdGltZSAobW9zdCByZWNlbnQgZmlyc3QpXG4gICAgICByZXR1cm4gYi5zdGF0Lm10aW1lIC0gYS5zdGF0Lm10aW1lO1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0SXRlbVRleHQoZmlsZTogVEZpbGUpOiBzdHJpbmcge1xuICAgIC8vIFJldHVybiBwYXRoIHdpdGhvdXQgZXh0ZW5zaW9uIGZvciBiZXR0ZXIgbWF0Y2hpbmdcbiAgICByZXR1cm4gZmlsZS5wYXRoLnJlcGxhY2UoL1xcLm1kJC8sICcnKTtcbiAgfVxuXG4gIHJlbmRlclN1Z2dlc3Rpb24obWF0Y2g6IEZ1enp5TWF0Y2g8VEZpbGU+LCBlbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICBjb25zdCBmaWxlID0gbWF0Y2guaXRlbTtcbiAgICBjb25zdCBjb250YWluZXIgPSBlbC5jcmVhdGVEaXYoeyBjbHM6ICdzYWdlLWFpLWp1bXAtc3VnZ2VzdGlvbicgfSk7XG5cbiAgICAvLyBGaWxlIG5hbWVcbiAgICBjb250YWluZXIuY3JlYXRlRGl2KHtcbiAgICAgIHRleHQ6IGZpbGUuYmFzZW5hbWUsXG4gICAgICBjbHM6ICdzYWdlLWFpLWp1bXAtdGl0bGUnLFxuICAgIH0pO1xuXG4gICAgLy8gRnVsbCBwYXRoIChpZiBpbiBmb2xkZXIpXG4gICAgaWYgKGZpbGUucGFyZW50ICYmIGZpbGUucGFyZW50LnBhdGggIT09ICcvJykge1xuICAgICAgY29udGFpbmVyLmNyZWF0ZURpdih7XG4gICAgICAgIHRleHQ6IGZpbGUucGFyZW50LnBhdGgsXG4gICAgICAgIGNsczogJ3NhZ2UtYWktanVtcC1wYXRoJyxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIExhc3QgbW9kaWZpZWRcbiAgICBjb25zdCBtdGltZSA9IG5ldyBEYXRlKGZpbGUuc3RhdC5tdGltZSk7XG4gICAgY29uc3QgdGltZUFnbyA9IHRoaXMuZm9ybWF0VGltZUFnbyhtdGltZSk7XG4gICAgY29udGFpbmVyLmNyZWF0ZURpdih7XG4gICAgICB0ZXh0OiB0aW1lQWdvLFxuICAgICAgY2xzOiAnc2FnZS1haS1qdW1wLW10aW1lJyxcbiAgICB9KTtcbiAgfVxuXG4gIG9uQ2hvb3NlSXRlbShmaWxlOiBURmlsZSk6IHZvaWQge1xuICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQoZmlsZS5wYXRoLCAnJywgZmFsc2UpO1xuICB9XG5cbiAgcHJpdmF0ZSBmb3JtYXRUaW1lQWdvKGRhdGU6IERhdGUpOiBzdHJpbmcge1xuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgZGlmZk1zID0gbm93LmdldFRpbWUoKSAtIGRhdGUuZ2V0VGltZSgpO1xuICAgIGNvbnN0IGRpZmZNaW5zID0gTWF0aC5mbG9vcihkaWZmTXMgLyA2MDAwMCk7XG4gICAgY29uc3QgZGlmZkhvdXJzID0gTWF0aC5mbG9vcihkaWZmTXMgLyAzNjAwMDAwKTtcbiAgICBjb25zdCBkaWZmRGF5cyA9IE1hdGguZmxvb3IoZGlmZk1zIC8gODY0MDAwMDApO1xuXG4gICAgaWYgKGRpZmZNaW5zIDwgMSkge1xuICAgICAgcmV0dXJuICdqdXN0IG5vdyc7XG4gICAgfSBlbHNlIGlmIChkaWZmTWlucyA8IDYwKSB7XG4gICAgICByZXR1cm4gYCR7ZGlmZk1pbnN9bSBhZ29gO1xuICAgIH0gZWxzZSBpZiAoZGlmZkhvdXJzIDwgMjQpIHtcbiAgICAgIHJldHVybiBgJHtkaWZmSG91cnN9aCBhZ29gO1xuICAgIH0gZWxzZSBpZiAoZGlmZkRheXMgPCA3KSB7XG4gICAgICByZXR1cm4gYCR7ZGlmZkRheXN9ZCBhZ29gO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoKTtcbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBBcHAsIE1vZGFsLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBEb2N1bWVudEluZGV4ZXIgfSBmcm9tICcuLi9zZXJ2aWNlcy9pbmRleGVyJztcblxuZXhwb3J0IGNsYXNzIEluZGV4TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIHByaXZhdGUgaW5kZXhlcjogRG9jdW1lbnRJbmRleGVyO1xuICBwcml2YXRlIHByb2dyZXNzRWw6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIHN0YXR1c0VsOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBidXR0b25FbDogSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gIHByaXZhdGUgaXNJbmRleGluZzogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBpbmRleGVyOiBEb2N1bWVudEluZGV4ZXIpIHtcbiAgICBzdXBlcihhcHApO1xuICAgIHRoaXMuaW5kZXhlciA9IGluZGV4ZXI7XG4gIH1cblxuICBvbk9wZW4oKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgY29udGVudEVsLmFkZENsYXNzKCdzYWdlLWFpLWluZGV4LW1vZGFsJyk7XG5cbiAgICAvLyBUaXRsZVxuICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdTYWdlIEFJOiBSZWJ1aWxkIEluZGV4JyB9KTtcblxuICAgIC8vIERlc2NyaXB0aW9uXG4gICAgY29udGVudEVsLmNyZWF0ZUVsKCdwJywge1xuICAgICAgdGV4dDogJ1RoaXMgd2lsbCByZS1pbmRleCBhbGwgbWFya2Rvd24gZmlsZXMgaW4geW91ciB2YXVsdC4gRXhpc3RpbmcgaW5kZXggZGF0YSB3aWxsIGJlIHVwZGF0ZWQuJyxcbiAgICAgIGNsczogJ3NhZ2UtYWktaW5kZXgtZGVzY3JpcHRpb24nLFxuICAgIH0pO1xuXG4gICAgLy8gUHJvZ3Jlc3MgYmFyIGNvbnRhaW5lclxuICAgIGNvbnN0IHByb2dyZXNzQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdih7XG4gICAgICBjbHM6ICdzYWdlLWFpLXByb2dyZXNzLWNvbnRhaW5lcicsXG4gICAgfSk7XG4gICAgdGhpcy5wcm9ncmVzc0VsID0gcHJvZ3Jlc3NDb250YWluZXIuY3JlYXRlRGl2KHtcbiAgICAgIGNsczogJ3NhZ2UtYWktcHJvZ3Jlc3MtYmFyJyxcbiAgICB9KTtcblxuICAgIC8vIFN0YXR1cyB0ZXh0XG4gICAgdGhpcy5zdGF0dXNFbCA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdzYWdlLWFpLWluZGV4LXN0YXR1cycgfSk7XG5cbiAgICAvLyBCdXR0b24gY29udGFpbmVyXG4gICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdih7XG4gICAgICBjbHM6ICdzYWdlLWFpLWJ1dHRvbi1jb250YWluZXInLFxuICAgIH0pO1xuXG4gICAgdGhpcy5idXR0b25FbCA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ1N0YXJ0IEluZGV4aW5nJyxcbiAgICAgIGNsczogJ21vZC1jdGEnLFxuICAgIH0pO1xuXG4gICAgdGhpcy5idXR0b25FbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuc3RhcnRJbmRleGluZygpO1xuICAgIH0pO1xuXG4gICAgLy8gSW5pdGlhbCBjaGVja1xuICAgIHRoaXMuY2hlY2tIZWFsdGgoKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgY2hlY2tIZWFsdGgoKSB7XG4gICAgdGhpcy5zdGF0dXNFbC5zZXRUZXh0KCdDaGVja2luZyBjb25uZWN0aW9ucy4uLicpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGhlYWx0aCA9IGF3YWl0IHRoaXMuaW5kZXhlci5oZWFsdGhDaGVjaygpO1xuXG4gICAgICBpZiAoIWhlYWx0aC5vbGxhbWEuaGVhbHRoeSkge1xuICAgICAgICB0aGlzLnN0YXR1c0VsLnNldFRleHQoYE9sbGFtYTogJHtoZWFsdGgub2xsYW1hLm1lc3NhZ2V9YCk7XG4gICAgICAgIHRoaXMuYnV0dG9uRWwuZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIFFkcmFudCBjb2xsZWN0aW9uIG1pZ2h0IG5vdCBleGlzdCB5ZXQsIHRoYXQncyBPS1xuICAgICAgaWYgKCFoZWFsdGgucWRyYW50LmhlYWx0aHkgJiYgIWhlYWx0aC5xZHJhbnQubWVzc2FnZS5pbmNsdWRlcygnbm90IGZvdW5kJykpIHtcbiAgICAgICAgdGhpcy5zdGF0dXNFbC5zZXRUZXh0KGBRZHJhbnQ6ICR7aGVhbHRoLnFkcmFudC5tZXNzYWdlfWApO1xuICAgICAgICB0aGlzLmJ1dHRvbkVsLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgIHRoaXMuc3RhdHVzRWwuc2V0VGV4dChgUmVhZHkgdG8gaW5kZXggJHtmaWxlcy5sZW5ndGh9IGZpbGVzYCk7XG4gICAgICB0aGlzLmJ1dHRvbkVsLmRpc2FibGVkID0gZmFsc2U7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuc3RhdHVzRWwuc2V0VGV4dChcbiAgICAgICAgYEVycm9yOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0Nvbm5lY3Rpb24gZmFpbGVkJ31gXG4gICAgICApO1xuICAgICAgdGhpcy5idXR0b25FbC5kaXNhYmxlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzdGFydEluZGV4aW5nKCkge1xuICAgIGlmICh0aGlzLmlzSW5kZXhpbmcpIHJldHVybjtcbiAgICB0aGlzLmlzSW5kZXhpbmcgPSB0cnVlO1xuICAgIHRoaXMuYnV0dG9uRWwuZGlzYWJsZWQgPSB0cnVlO1xuICAgIHRoaXMuYnV0dG9uRWwuc2V0VGV4dCgnSW5kZXhpbmcuLi4nKTtcblxuICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3RhdHMgPSBhd2FpdCB0aGlzLmluZGV4ZXIuaW5kZXhWYXVsdCgoY3VycmVudCwgdG90YWwsIGZpbGUpID0+IHtcbiAgICAgICAgY29uc3QgcGVyY2VudCA9IChjdXJyZW50IC8gdG90YWwpICogMTAwO1xuICAgICAgICB0aGlzLnByb2dyZXNzRWwuc3R5bGUud2lkdGggPSBgJHtwZXJjZW50fSVgO1xuICAgICAgICB0aGlzLnN0YXR1c0VsLnNldFRleHQoYCR7Y3VycmVudH0vJHt0b3RhbH06ICR7ZmlsZX1gKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBkdXJhdGlvbiA9ICgoRGF0ZS5ub3coKSAtIHN0YXJ0VGltZSkgLyAxMDAwKS50b0ZpeGVkKDEpO1xuICAgICAgdGhpcy5zdGF0dXNFbC5zZXRUZXh0KFxuICAgICAgICBgSW5kZXhlZCAke3N0YXRzLnRvdGFsRG9jdW1lbnRzfSBkb2N1bWVudHMgaW4gJHtkdXJhdGlvbn1zYFxuICAgICAgKTtcbiAgICAgIHRoaXMucHJvZ3Jlc3NFbC5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICAgIHRoaXMuYnV0dG9uRWwuc2V0VGV4dCgnRG9uZScpO1xuXG4gICAgICBuZXcgTm90aWNlKFxuICAgICAgICBgU2FnZSBBSTogSW5kZXhlZCAke3N0YXRzLnRvdGFsRG9jdW1lbnRzfSBkb2N1bWVudHMgaW4gJHtkdXJhdGlvbn1zYFxuICAgICAgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignSW5kZXhpbmcgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgdGhpcy5zdGF0dXNFbC5zZXRUZXh0KFxuICAgICAgICBgRXJyb3I6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnSW5kZXhpbmcgZmFpbGVkJ31gXG4gICAgICApO1xuICAgICAgdGhpcy5idXR0b25FbC5zZXRUZXh0KCdSZXRyeScpO1xuICAgICAgdGhpcy5idXR0b25FbC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH0gZmluYWxseSB7XG4gICAgICB0aGlzLmlzSW5kZXhpbmcgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBvbkNsb3NlKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICB9XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsbUJBQStEOzs7QUNBL0Qsc0JBQTJCO0FBV3BCLElBQU0sZ0JBQU4sTUFBb0I7QUFBQSxFQUl6QixZQUFZLFFBQTZCO0FBQ3ZDLFNBQUssVUFBVSxPQUFPLFFBQVEsUUFBUSxPQUFPLEVBQUU7QUFDL0MsU0FBSyxRQUFRLE9BQU87QUFBQSxFQUN0QjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsTUFBTSxhQUFhLE1BQWlDO0FBQ2xELFVBQU0sV0FBVyxVQUFNLDRCQUFXO0FBQUEsTUFDaEMsS0FBSyxHQUFHLEtBQUssT0FBTztBQUFBLE1BQ3BCLFFBQVE7QUFBQSxNQUNSLFNBQVM7QUFBQSxRQUNQLGdCQUFnQjtBQUFBLE1BQ2xCO0FBQUEsTUFDQSxNQUFNLEtBQUssVUFBVTtBQUFBLFFBQ25CLE9BQU8sS0FBSztBQUFBLFFBQ1osUUFBUTtBQUFBLE1BQ1YsQ0FBQztBQUFBLElBQ0gsQ0FBQztBQUVELFFBQUksU0FBUyxXQUFXLEtBQUs7QUFDM0IsWUFBTSxJQUFJLE1BQU0scUJBQXFCLFNBQVMsTUFBTSxFQUFFO0FBQUEsSUFDeEQ7QUFFQSxVQUFNLE9BQU8sU0FBUztBQUN0QixXQUFPLEtBQUs7QUFBQSxFQUNkO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxNQUFNLGNBQWMsT0FBc0M7QUFDeEQsVUFBTSxhQUF5QixDQUFDO0FBQ2hDLGVBQVcsUUFBUSxPQUFPO0FBQ3hCLFlBQU0sWUFBWSxNQUFNLEtBQUssYUFBYSxJQUFJO0FBQzlDLGlCQUFXLEtBQUssU0FBUztBQUFBLElBQzNCO0FBQ0EsV0FBTztBQUFBLEVBQ1Q7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLE1BQU0sY0FBOEQ7QUEzRHRFO0FBNERJLFFBQUk7QUFFRixZQUFNLGVBQWUsVUFBTSw0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QyxFQUNwRDtBQUFBLE1BQVUsQ0FBQyxXQUNWLE9BQ0csVUFBVSxHQUFHLEdBQUcsSUFBSSxFQUNwQixTQUFTLEtBQUssT0FBTyxTQUFTLFFBQVEsRUFDdEMsa0JBQWtCLEVBQ2xCLFNBQVMsT0FBTyxVQUFVO0FBQ3pCLGFBQUssT0FBTyxTQUFTLFdBQVc7QUFDaEMsY0FBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLE1BQ2pDLENBQUM7QUFBQSxJQUNMO0FBR0YsZ0JBQVksU0FBUyxNQUFNLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUV0RCxRQUFJLHlCQUFRLFdBQVcsRUFDcEIsUUFBUSxrQkFBa0IsRUFDMUIsUUFBUSw4Q0FBOEMsRUFDdEQ7QUFBQSxNQUFVLENBQUMsV0FDVixPQUFPLGNBQWMsTUFBTSxFQUFFLFFBQVEsWUFBWTtBQUMvQyxlQUFPLGNBQWMsWUFBWTtBQUNqQyxlQUFPLFlBQVksSUFBSTtBQUV2QixZQUFJO0FBQ0YsZ0JBQU0sU0FBUyxJQUFJLGNBQWM7QUFBQSxZQUMvQixTQUFTLEtBQUssT0FBTyxTQUFTO0FBQUEsWUFDOUIsT0FBTyxLQUFLLE9BQU8sU0FBUztBQUFBLFVBQzlCLENBQUM7QUFDRCxnQkFBTSxTQUFTLElBQUksY0FBYztBQUFBLFlBQy9CLFNBQVMsS0FBSyxPQUFPLFNBQVM7QUFBQSxZQUM5QixZQUFZLEtBQUssT0FBTyxTQUFTO0FBQUEsVUFDbkMsQ0FBQztBQUVELGdCQUFNLENBQUMsY0FBYyxZQUFZLElBQUksTUFBTSxRQUFRLElBQUk7QUFBQSxZQUNyRCxPQUFPLFlBQVk7QUFBQSxZQUNuQixPQUFPLFlBQVk7QUFBQSxVQUNyQixDQUFDO0FBRUQsY0FBSSxVQUFVO0FBQ2QscUJBQVcsV0FBVyxhQUFhLFVBQVUsV0FBTSxRQUFHLElBQUksYUFBYSxPQUFPO0FBQUE7QUFDOUUscUJBQVcsV0FBVyxhQUFhLFVBQVUsV0FBTSxRQUFHLElBQUksYUFBYSxPQUFPO0FBRTlFLGNBQUksd0JBQU8sU0FBUyxHQUFJO0FBQUEsUUFDMUIsU0FBUyxPQUFPO0FBQ2QsY0FBSTtBQUFBLFlBQ0YsVUFBVSxpQkFBaUIsUUFBUSxNQUFNLFVBQVUsYUFBYTtBQUFBLFVBQ2xFO0FBQUEsUUFDRixVQUFFO0FBQ0EsaUJBQU8sY0FBYyxNQUFNO0FBQzNCLGlCQUFPLFlBQVksS0FBSztBQUFBLFFBQzFCO0FBQUEsTUFDRixDQUFDO0FBQUEsSUFDSDtBQUFBLEVBQ0o7QUFDRjsiLAogICJuYW1lcyI6IFsiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiJdCn0K
